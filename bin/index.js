#!/usr/bin/env node
"use strict";var e=require("node:process"),t=require("onetime"),n=require("signal-exit"),r=require("cli-spinners"),i=require("wcwidth"),s=require("node:readline"),o=require("bl"),a=require("assert"),c=require("path"),l=require("fs"),h=require("util"),u=require("url"),f=require("process"),d=require("@babel/runtime/regenerator"),p=require("run-async"),g=require("lodash/defaults.js"),m=require("lodash/clone.js"),y=require("node:assert"),b=require("lodash"),v=require("cli-width"),w=require("eastasianwidth"),E=require("emoji-regex"),O=require("external-editor"),x=require("through"),S=require("mute-stream"),k=require("lodash/isPlainObject.js"),j=require("lodash/get.js"),_=require("lodash/set.js"),C=require("ssh-keygen"),A=require("os"),P=require("fs/promises"),D=require("child_process"),M=require("lowdb/lib"),T=require("lowdb/lib/node"),I=require("node-pty");const L=10,R=(e=0)=>t=>`[${t+e}m`,B=(e=0)=>t=>`[${38+e};5;${t}m`,N=(e=0)=>(t,n,r)=>`[${38+e};2;${t};${n};${r}m`,$={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys($.modifier);Object.keys($.color),Object.keys($.bgColor);const U=function(){const e=new Map;for(const[t,n]of Object.entries($)){for(const[t,r]of Object.entries(n))$[t]={open:`[${r[0]}m`,close:`[${r[1]}m`},n[t]=$[t],e.set(r[0],r[1]);Object.defineProperty($,t,{value:n,enumerable:!1})}return Object.defineProperty($,"codes",{value:e,enumerable:!1}),$.color.close="[39m",$.bgColor.close="[49m",$.color.ansi=R(),$.color.ansi256=B(),$.color.ansi16m=N(),$.bgColor.ansi=R(L),$.bgColor.ansi256=B(L),$.bgColor.ansi16m=N(L),Object.defineProperties($,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value(e){const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;3===n.length&&(n=[...n].map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>$.rgbToAnsi256(...$.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return e-8+90;let t,n,r;if(e>=232)t=(10*(e-232)+8)/255,n=t,r=t;else{const i=(e-=16)%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}const i=2*Math.max(t,n,r);if(0===i)return 30;let s=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return 2===i&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>$.ansi256ToAnsi($.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>$.ansi256ToAnsi($.hexToAnsi256(e)),enumerable:!1}}),$}(),F=(()=>{if(navigator.userAgentData){const e=navigator.userAgentData.brands.find((({brand:e})=>"Chromium"===e));if(e&&e.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),q=0!==F&&{level:F,hasBasic:!0,has256:F>=2,has16m:F>=3},z={stdout:q,stderr:q};function W(e,t,n){let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let s=0,o="";do{o+=e.slice(s,r)+t+n,s=r+i,r=e.indexOf(t,s)}while(-1!==r);return o+=e.slice(s),o}const{stdout:K,stderr:V}=z,H=Symbol("GENERATOR"),G=Symbol("STYLER"),Y=Symbol("IS_EMPTY"),Q=["ansi","ansi","ansi256","ansi16m"],J=Object.create(null),Z=e=>{const t=(...e)=>e.join(" ");return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=K?K.level:0;e.level=void 0===t.level?n:t.level})(t,e),Object.setPrototypeOf(t,X.prototype),t};function X(e){return Z(e)}Object.setPrototypeOf(X.prototype,Function.prototype);for(const[e,t]of Object.entries(U))J[e]={get(){const n=ie(this,re(t.open,t.close,this[G]),this[Y]);return Object.defineProperty(this,e,{value:n}),n}};J.visible={get(){const e=ie(this,this[G],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const ee=(e,t,n,...r)=>"rgb"===e?"ansi16m"===t?U[n].ansi16m(...r):"ansi256"===t?U[n].ansi256(U.rgbToAnsi256(...r)):U[n].ansi(U.rgbToAnsi(...r)):"hex"===e?ee("rgb",t,n,...U.hexToRgb(...r)):U[n][e](...r),te=["rgb","hex","ansi256"];for(const e of te){J[e]={get(){const{level:t}=this;return function(...n){const r=re(ee(e,Q[t],"color",...n),U.color.close,this[G]);return ie(this,r,this[Y])}}};J["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const r=re(ee(e,Q[t],"bgColor",...n),U.bgColor.close,this[G]);return ie(this,r,this[Y])}}}}const ne=Object.defineProperties((()=>{}),{...J,level:{enumerable:!0,get(){return this[H].level},set(e){this[H].level=e}}}),re=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},ie=(e,t,n)=>{const r=(...e)=>se(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,ne),r[H]=e,r[G]=t,r[Y]=n,r},se=(e,t)=>{if(e.level<=0||!t)return e[Y]?"":t;let n=e[G];if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(t.includes(""))for(;void 0!==n;)t=W(t,n.close,n.open),n=n.parent;const s=t.indexOf("\n");return-1!==s&&(t=function(e,t,n,r){let i=0,s="";do{const o="\r"===e[r-1];s+=e.slice(i,o?r-1:r)+t+(o?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return s+=e.slice(i),s}(t,i,r,s)),r+t+i};Object.defineProperties(X.prototype,J);const oe=X();X({level:V?V.level:0});const ae=t((()=>{n((()=>{e.stderr.write("[?25h")}),{alwaysLast:!0})}));let ce=!1;const le={show:(t=e.stderr)=>{t.isTTY&&(ce=!1,t.write("[?25h"))},hide:(t=e.stderr)=>{t.isTTY&&(ae(),ce=!0,t.write("[?25l"))},toggle:(e,t)=>{void 0!==e&&(ce=e),ce?le.show(t):le.hide(t)}},he="ℹ️",ue="✅",fe="⚠️",de="❌️";function pe(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}(),"")}function ge(){return"win32"!==e.platform?"linux"!==e.env.TERM:Boolean(e.env.CI)||Boolean(e.env.WT_SESSION)||Boolean(e.env.TERMINUS_SUBLIME)||"{cmd::Cmder}"===e.env.ConEmuTask||"Terminus-Sublime"===e.env.TERM_PROGRAM||"vscode"===e.env.TERM_PROGRAM||"xterm-256color"===e.env.TERM||"alacritty"===e.env.TERM||"JetBrains-JediTerm"===e.env.TERMINAL_EMULATOR}class me{#e=0;#t=new o.BufferListStream;#n;#r;constructor(){this.#t.pipe(e.stdout);const t=this;this.#n=function(n,r,...i){const{stdin:s}=e;if(t.#e>0||s.emit===t.#n){if("keypress"===n)return;"data"===n&&r.includes(3)&&e.emit("SIGINT"),Reflect.apply(t.#n,this,[n,r,...i])}else Reflect.apply(e.stdin.emit,this,[n,r,...i])}}start(){this.#e++,1===this.#e&&this._realStart()}stop(){if(this.#e<=0)throw new Error("`stop` called more times than `start`");this.#e--,0===this.#e&&this._realStop()}_realStart(){"win32"!==e.platform&&(this.#r=s.createInterface({input:e.stdin,output:this.#t}),this.#r.on("SIGINT",(()=>{0===e.listenerCount("SIGINT")?e.emit("SIGINT"):(this.#r.close(),e.kill(e.pid,"SIGINT"))})))}_realStop(){"win32"!==e.platform&&(this.#r.close(),this.#r=void 0)}}let ye;class be{#i=0;#s=!1;#o=0;#a=0;#c;#l;#h;#u;#f;#d;#p;#g;#m;#y;color;constructor(t){ye||(ye=new me),"string"==typeof t&&(t={text:t}),this.#c={color:"cyan",stream:e.stderr,discardStdin:!0,hideCursor:!0,...t},this.color=this.#c.color,this.spinner=this.#c.spinner,this.#f=this.#c.interval,this.#h=this.#c.stream,this.#d="boolean"==typeof this.#c.isEnabled?this.#c.isEnabled:function({stream:e=process.stdout}={}){return Boolean(e&&e.isTTY&&"dumb"!==process.env.TERM&&!("CI"in process.env))}({stream:this.#h}),this.#p="boolean"==typeof this.#c.isSilent&&this.#c.isSilent,this.text=this.#c.text,this.prefixText=this.#c.prefixText,this.indent=this.#c.indent,"test"===e.env.NODE_ENV&&(this._stream=this.#h,this._isEnabled=this.#d,Object.defineProperty(this,"_linesToClear",{get(){return this.#i},set(e){this.#i=e}}),Object.defineProperty(this,"_frameIndex",{get(){return this.#a}}),Object.defineProperty(this,"_lineCount",{get(){return this.#o}}))}get indent(){return this.#g}set indent(e=0){if(!(e>=0&&Number.isInteger(e)))throw new Error("The `indent` option must be an integer from 0 and up");this.#g=e,this.updateLineCount()}get interval(){return this.#f||this.#l.interval||100}get spinner(){return this.#l}set spinner(e){if(this.#a=0,this.#f=void 0,"object"==typeof e){if(void 0===e.frames)throw new Error("The given spinner must have a `frames` property");this.#l=e}else if(ge())if(void 0===e)this.#l=r.dots;else{if("default"===e||!r[e])throw new Error(`There is no built-in spinner named '${e}'. See https://github.com/sindresorhus/cli-spinners/blob/main/spinners.json for a full list.`);this.#l=r[e]}else this.#l=r.line}get text(){return this.#m}set text(e){this.#m=e||"",this.updateLineCount()}get prefixText(){return this.#y}set prefixText(e){this.#y=e||"",this.updateLineCount()}get isSpinning(){return void 0!==this.#u}getFullPrefixText(e=this.#y,t=" "){return"string"==typeof e&&""!==e?e+t:"function"==typeof e?e()+t:""}updateLineCount(){const e=this.#h.columns||80,t=this.getFullPrefixText(this.#y,"-");this.#o=0;for(const n of pe(" ".repeat(this.#g)+t+"--"+this.#m).split("\n"))this.#o+=Math.max(1,Math.ceil(i(n)/e))}get isEnabled(){return this.#d&&!this.#p}set isEnabled(e){if("boolean"!=typeof e)throw new TypeError("The `isEnabled` option must be a boolean");this.#d=e}get isSilent(){return this.#p}set isSilent(e){if("boolean"!=typeof e)throw new TypeError("The `isSilent` option must be a boolean");this.#p=e}frame(){const{frames:e}=this.#l;let t=e[this.#a];this.color&&(t=oe[this.color](t)),this.#a=++this.#a%e.length;return("string"==typeof this.#y&&""!==this.#y?this.#y+" ":"")+t+("string"==typeof this.text?" "+this.text:"")}clear(){if(!this.#d||!this.#h.isTTY)return this;this.#h.cursorTo(0);for(let e=0;e<this.#i;e++)e>0&&this.#h.moveCursor(0,-1),this.#h.clearLine(1);return(this.#g||this.lastIndent!==this.#g)&&this.#h.cursorTo(this.#g),this.lastIndent=this.#g,this.#i=0,this}render(){return this.#p||(this.clear(),this.#h.write(this.frame()),this.#i=this.#o),this}start(t){return t&&(this.text=t),this.#p?this:this.#d?(this.isSpinning||(this.#c.hideCursor&&le.hide(this.#h),this.#c.discardStdin&&e.stdin.isTTY&&(this.#s=!0,ye.start()),this.render(),this.#u=setInterval(this.render.bind(this),this.interval)),this):(this.text&&this.#h.write(`- ${this.text}\n`),this)}stop(){return this.#d?(clearInterval(this.#u),this.#u=void 0,this.#a=0,this.clear(),this.#c.hideCursor&&le.show(this.#h),this.#c.discardStdin&&e.stdin.isTTY&&this.#s&&(ye.stop(),this.#s=!1),this):this}succeed(e){return this.stopAndPersist({symbol:ue,text:e})}fail(e){return this.stopAndPersist({symbol:de,text:e})}warn(e){return this.stopAndPersist({symbol:fe,text:e})}info(e){return this.stopAndPersist({symbol:he,text:e})}stopAndPersist(e={}){if(this.#p)return this;const t=e.prefixText||this.#y,n=e.text||this.text,r="string"==typeof n?" "+n:"";return this.stop(),this.#h.write(`${this.getFullPrefixText(t," ")}${e.symbol||" "}${r}\n`),this}}function ve(e){return new be(e)}const we={right:function(e,t){e=e.trim();const n=xe.stringWidth(e);if(n<t)return" ".repeat(t-n)+e;return e},center:function(e,t){e=e.trim();const n=xe.stringWidth(e);if(n>=t)return e;return" ".repeat(t-n>>1)+e}},Ee=1,Oe=3;let xe,Se=class{constructor(e){var t;this.width=e.width,this.wrap=null===(t=e.wrap)||void 0===t||t,this.rows=[]}span(...e){this.div(...e).span=!0}resetOutput(){this.rows=[]}div(...e){if(0===e.length&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&"string"==typeof e[0])return this.applyLayoutDSL(e[0]);const t=e.map((e=>"string"==typeof e?this.colFromString(e):e));return this.rows.push(t),t}shouldApplyLayoutDSL(...e){return 1===e.length&&"string"==typeof e[0]&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){const t=e.split("\n").map((e=>e.split("\t")));let n=0;return t.forEach((e=>{e.length>1&&xe.stringWidth(e[0])>n&&(n=Math.min(Math.floor(.5*this.width),xe.stringWidth(e[0])))})),t.forEach((e=>{this.div(...e.map(((t,r)=>({text:t.trim(),padding:this.measurePadding(t),width:0===r&&e.length>1?n:void 0}))))})),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){const t=xe.stripAnsi(e);return[0,t.match(/\s*$/)[0].length,0,t.match(/^\s*/)[0].length]}toString(){const e=[];return this.rows.forEach((t=>{this.rowToString(t,e)})),e.filter((e=>!e.hidden)).map((e=>e.text)).join("\n")}rowToString(e,t){return this.rasterize(e).forEach(((n,r)=>{let i="";n.forEach(((n,s)=>{const{width:o}=e[s],a=this.negatePadding(e[s]);let c=n;if(a>xe.stringWidth(n)&&(c+=" ".repeat(a-xe.stringWidth(n))),e[s].align&&"left"!==e[s].align&&this.wrap){c=(0,we[e[s].align])(c,a),xe.stringWidth(c)<a&&(c+=" ".repeat((o||0)-xe.stringWidth(c)-1))}const l=e[s].padding||[0,0,0,0];l[Oe]&&(i+=" ".repeat(l[Oe])),i+=ke(e[s],c,"| "),i+=c,i+=ke(e[s],c," |"),l[Ee]&&(i+=" ".repeat(l[Ee])),0===r&&t.length>0&&(i=this.renderInline(i,t[t.length-1]))})),t.push({text:i.replace(/ +$/,""),span:e.span})})),t}renderInline(e,t){const n=e.match(/^ */),r=n?n[0].length:0,i=t.text,s=xe.stringWidth(i.trimRight());return t.span?this.wrap?r<s?e:(t.hidden=!0,i.trimRight()+" ".repeat(r-s)+e.trimLeft()):(t.hidden=!0,i+e):e}rasterize(e){const t=[],n=this.columnWidths(e);let r;return e.forEach(((e,i)=>{e.width=n[i],r=this.wrap?xe.wrap(e.text,this.negatePadding(e),{hard:!0}).split("\n"):e.text.split("\n"),e.border&&(r.unshift("."+"-".repeat(this.negatePadding(e)+2)+"."),r.push("'"+"-".repeat(this.negatePadding(e)+2)+"'")),e.padding&&(r.unshift(...new Array(e.padding[0]||0).fill("")),r.push(...new Array(e.padding[2]||0).fill(""))),r.forEach(((e,n)=>{t[n]||t.push([]);const r=t[n];for(let e=0;e<i;e++)void 0===r[e]&&r.push("");r.push(e)}))})),t}negatePadding(e){let t=e.width||0;return e.padding&&(t-=(e.padding[Oe]||0)+(e.padding[Ee]||0)),e.border&&(t-=4),t}columnWidths(e){if(!this.wrap)return e.map((e=>e.width||xe.stringWidth(e.text)));let t=e.length,n=this.width;const r=e.map((e=>{if(e.width)return t--,n-=e.width,e.width})),i=t?Math.floor(n/t):0;return r.map(((t,n)=>void 0===t?Math.max(i,function(e){const t=e.padding||[],n=1+(t[Oe]||0)+(t[Ee]||0);if(e.border)return n+4;return n}(e[n])):t))}};function ke(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":0!==t.trim().length?n:"  ":""}const je=new RegExp("(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function _e(e){return e.replace(je,"")}function Ce(e,t){const[n,r]=e.match(je)||["",""];e=_e(e);let i="";for(let n=0;n<e.length;n++)0!==n&&n%t==0&&(i+="\n"),i+=e.charAt(n);return n&&r&&(i=`${n}${i}${r}`),i}
/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
function Ae(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),-1===e.indexOf("-")&&-1===e.indexOf("_"))return e;{let t="",n=!1;const r=e.match(/^-+/);for(let i=r?r[0].length:0;i<e.length;i++){let r=e.charAt(i);n&&(n=!1,r=r.toUpperCase()),0===i||"-"!==r&&"_"!==r?"-"!==r&&"_"!==r&&(t+=r):n=!0}return t}}function Pe(e,t){const n=e.toLowerCase();t=t||"-";let r="";for(let i=0;i<e.length;i++){const s=n.charAt(i),o=e.charAt(i);r+=s!==o&&i>0?`${t}${n.charAt(i)}`:o}return r}function De(e){return null!=e&&("number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||!/^0[^.]/.test(e)&&/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)))}
/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
var Me;
/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
let Te;!function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"}(Me||(Me={}));function Ie(e){return void 0!==e?e+1:1}function Le(e){return"__proto__"===e?"___proto___":e}
/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
var Re,Be,Ne;const $e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Ue=null!==(Be=null===(Re=null===process||void 0===process?void 0:process.versions)||void 0===Re?void 0:Re.node)&&void 0!==Be?Be:null===(Ne=null===process||void 0===process?void 0:process.version)||void 0===Ne?void 0:Ne.slice(1);if(Ue){if(Number(Ue.match(/^([^.]+)/)[1])<$e)throw Error(`yargs parser supports a minimum Node.js version of ${$e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`)}const Fe=process?process.env:{},qe=new class{constructor(e){Te=e}parse(e,t){const n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},t),r=function(e){if(Array.isArray(e))return e.map((e=>"string"!=typeof e?e+"":e));e=e.trim();let t=0,n=null,r=null,i=null;const s=[];for(let o=0;o<e.length;o++)n=r,r=e.charAt(o)," "!==r||i?(r===i?i=null:"'"!==r&&'"'!==r||i||(i=r),s[t]||(s[t]=""),s[t]+=r):" "!==n&&t++;return s}(e),i="string"==typeof e,s=function(e){const t=[],n=Object.create(null);let r=!0;Object.keys(e).forEach((function(n){t.push([].concat(e[n],n))}));for(;r;){r=!1;for(let e=0;e<t.length;e++)for(let n=e+1;n<t.length;n++){if(t[e].filter((function(e){return-1!==t[n].indexOf(e)})).length){t[e]=t[e].concat(t[n]),t.splice(n,1),r=!0;break}}}return t.forEach((function(e){const t=(e=e.filter((function(e,t,n){return n.indexOf(e)===t}))).pop();void 0!==t&&"string"==typeof t&&(n[t]=e)})),n}(Object.assign(Object.create(null),n.alias)),o=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),a=Object.assign(Object.create(null),n.default),c=n.configObjects||[],l=n.envPrefix,h=o["populate--"],u=h?"--":"_",f=Object.create(null),d=Object.create(null),p=n.__||Te.format,g={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},m=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,y=new RegExp("^--"+o["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach((function(e){const t="object"==typeof e?e.key:e,n=Object.keys(e).map((function(e){return{boolean:"bools",string:"strings",number:"numbers"}[e]})).filter(Boolean).pop();n&&(g[n][t]=!0),g.arrays[t]=!0,g.keys.push(t)})),[].concat(n.boolean||[]).filter(Boolean).forEach((function(e){g.bools[e]=!0,g.keys.push(e)})),[].concat(n.string||[]).filter(Boolean).forEach((function(e){g.strings[e]=!0,g.keys.push(e)})),[].concat(n.number||[]).filter(Boolean).forEach((function(e){g.numbers[e]=!0,g.keys.push(e)})),[].concat(n.count||[]).filter(Boolean).forEach((function(e){g.counts[e]=!0,g.keys.push(e)})),[].concat(n.normalize||[]).filter(Boolean).forEach((function(e){g.normalize[e]=!0,g.keys.push(e)})),"object"==typeof n.narg&&Object.entries(n.narg).forEach((([e,t])=>{"number"==typeof t&&(g.nargs[e]=t,g.keys.push(e))})),"object"==typeof n.coerce&&Object.entries(n.coerce).forEach((([e,t])=>{"function"==typeof t&&(g.coercions[e]=t,g.keys.push(e))})),void 0!==n.config&&(Array.isArray(n.config)||"string"==typeof n.config?[].concat(n.config).filter(Boolean).forEach((function(e){g.configs[e]=!0})):"object"==typeof n.config&&Object.entries(n.config).forEach((([e,t])=>{"boolean"!=typeof t&&"function"!=typeof t||(g.configs[e]=t)}))),function(...e){e.forEach((function(e){Object.keys(e||{}).forEach((function(e){g.aliases[e]||(g.aliases[e]=[].concat(s[e]||[]),g.aliases[e].concat(e).forEach((function(t){if(/-/.test(t)&&o["camel-case-expansion"]){const n=Ae(t);n!==e&&-1===g.aliases[e].indexOf(n)&&(g.aliases[e].push(n),f[n]=!0)}})),g.aliases[e].concat(e).forEach((function(t){if(t.length>1&&/[A-Z]/.test(t)&&o["camel-case-expansion"]){const n=Pe(t,"-");n!==e&&-1===g.aliases[e].indexOf(n)&&(g.aliases[e].push(n),f[n]=!0)}})),g.aliases[e].forEach((function(t){g.aliases[t]=[e].concat(g.aliases[e].filter((function(e){return t!==e})))})))}))}))}(n.key,s,n.default,g.arrays),Object.keys(a).forEach((function(e){(g.aliases[e]||[]).forEach((function(t){a[t]=a[e]}))}));let b=null;Object.keys(g.counts).find((e=>I(e,g.arrays)?(b=Error(p("Invalid configuration: %s, opts.count excludes opts.array.",e)),!0):!!I(e,g.nargs)&&(b=Error(p("Invalid configuration: %s, opts.count excludes opts.narg.",e)),!0)));let v=[];const w=Object.assign(Object.create(null),{_:[]}),E={};for(let e=0;e<r.length;e++){const t=r[e],n=t.replace(/^-{3,}/,"---");let i,s,a,c,l,h;if("--"!==t&&/^-/.test(t)&&R(t))O(t);else{if(n.match(/^---+(=|$)/)){O(t);continue}if(t.match(/^--.+=/)||!o["short-option-groups"]&&t.match(/^-.+=/))c=t.match(/^--?([^=]+)=([\s\S]*)$/),null!==c&&Array.isArray(c)&&c.length>=3&&(I(c[1],g.arrays)?e=S(e,c[1],r,c[2]):!1!==I(c[1],g.nargs)?e=x(e,c[1],r,c[2]):k(c[1],c[2],!0));else if(t.match(y)&&o["boolean-negation"])c=t.match(y),null!==c&&Array.isArray(c)&&c.length>=2&&(s=c[1],k(s,!!I(s,g.arrays)&&[!1]));else if(t.match(/^--.+/)||!o["short-option-groups"]&&t.match(/^-[^-]+/))c=t.match(/^--?(.+)/),null!==c&&Array.isArray(c)&&c.length>=2&&(s=c[1],I(s,g.arrays)?e=S(e,s,r):!1!==I(s,g.nargs)?e=x(e,s,r):(l=r[e+1],void 0===l||l.match(/^-/)&&!l.match(m)||I(s,g.bools)||I(s,g.counts)?/^(true|false)$/.test(l)?(k(s,l),e++):k(s,B(s)):(k(s,l),e++)));else if(t.match(/^-.\..+=/))c=t.match(/^-([^=]+)=([\s\S]*)$/),null!==c&&Array.isArray(c)&&c.length>=3&&k(c[1],c[2]);else if(t.match(/^-.\..+/)&&!t.match(m))l=r[e+1],c=t.match(/^-(.\..+)/),null!==c&&Array.isArray(c)&&c.length>=2&&(s=c[1],void 0===l||l.match(/^-/)||I(s,g.bools)||I(s,g.counts)?k(s,B(s)):(k(s,l),e++));else if(t.match(/^-[^-]+/)&&!t.match(m)){a=t.slice(1,-1).split(""),i=!1;for(let n=0;n<a.length;n++){if(l=t.slice(n+2),a[n+1]&&"="===a[n+1]){h=t.slice(n+3),s=a[n],I(s,g.arrays)?e=S(e,s,r,h):!1!==I(s,g.nargs)?e=x(e,s,r,h):k(s,h),i=!0;break}if("-"!==l){if(/[A-Za-z]/.test(a[n])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(l)&&!1===I(l,g.bools)){k(a[n],l),i=!0;break}if(a[n+1]&&a[n+1].match(/\W/)){k(a[n],l),i=!0;break}k(a[n],B(a[n]))}else k(a[n],l)}s=t.slice(-1)[0],i||"-"===s||(I(s,g.arrays)?e=S(e,s,r):!1!==I(s,g.nargs)?e=x(e,s,r):(l=r[e+1],void 0===l||/^(-|--)[^-]/.test(l)&&!l.match(m)||I(s,g.bools)||I(s,g.counts)?/^(true|false)$/.test(l)?(k(s,l),e++):k(s,B(s)):(k(s,l),e++)))}else if(t.match(/^-[0-9]$/)&&t.match(m)&&I(t.slice(1),g.bools))s=t.slice(1),k(s,B(s));else{if("--"===t){v=r.slice(e+1);break}if(o["halt-at-non-option"]){v=r.slice(e);break}O(t)}}}function O(e){const t=C("_",e);"string"!=typeof t&&"number"!=typeof t||w._.push(t)}function x(e,t,n,r){let i,s=I(t,g.nargs);if(s="number"!=typeof s||isNaN(s)?1:s,0===s)return N(r)||(b=Error(p("Argument unexpected for: %s",t))),k(t,B(t)),e;let a=N(r)?0:1;if(o["nargs-eats-options"])n.length-(e+1)+a<s&&(b=Error(p("Not enough arguments following: %s",t))),a=s;else{for(i=e+1;i<n.length&&(!n[i].match(/^-[^0-9]/)||n[i].match(m)||R(n[i]));i++)a++;a<s&&(b=Error(p("Not enough arguments following: %s",t)))}let c=Math.min(a,s);for(!N(r)&&c>0&&(k(t,r),c--),i=e+1;i<c+e+1;i++)k(t,n[i]);return e+c}function S(e,t,n,r){let s=[],c=r||n[e+1];const l=I(t,g.nargs);if(I(t,g.bools)&&!/^(true|false)$/.test(c))s.push(!0);else if(N(c)||N(r)&&/^-/.test(c)&&!m.test(c)&&!R(c)){if(void 0!==a[t]){const e=a[t];s=Array.isArray(e)?e:[e]}}else{N(r)||s.push(_(t,r,!0));for(let r=e+1;r<n.length&&!(!o["greedy-arrays"]&&s.length>0||l&&"number"==typeof l&&s.length>=l)&&(c=n[r],!/^-/.test(c)||m.test(c)||R(c));r++)e=r,s.push(_(t,c,i))}return"number"==typeof l&&(l&&s.length<l||isNaN(l)&&0===s.length)&&(b=Error(p("Not enough arguments following: %s",t))),k(t,s),e}function k(e,t,n=i){if(/-/.test(e)&&o["camel-case-expansion"]){const t=e.split(".").map((function(e){return Ae(e)})).join(".");j(e,t)}const r=_(e,t,n),s=e.split(".");if(T(w,s,r),g.aliases[e]&&g.aliases[e].forEach((function(e){const t=e.split(".");T(w,t,r)})),s.length>1&&o["dot-notation"]&&(g.aliases[s[0]]||[]).forEach((function(t){let n=t.split(".");const i=[].concat(s);i.shift(),n=n.concat(i),(g.aliases[e]||[]).includes(n.join("."))||T(w,n,r)})),I(e,g.normalize)&&!I(e,g.arrays)){[e].concat(g.aliases[e]||[]).forEach((function(e){Object.defineProperty(E,e,{enumerable:!0,get:()=>t,set(e){t="string"==typeof e?Te.normalize(e):e}})}))}}function j(e,t){g.aliases[e]&&g.aliases[e].length||(g.aliases[e]=[t],f[t]=!0),g.aliases[t]&&g.aliases[t].length||j(t,e)}function _(e,t,n){n&&(t=function(e){return"string"!=typeof e||"'"!==e[0]&&'"'!==e[0]||e[e.length-1]!==e[0]?e:e.substring(1,e.length-1)}(t)),(I(e,g.bools)||I(e,g.counts))&&"string"==typeof t&&(t="true"===t);let r=Array.isArray(t)?t.map((function(t){return C(e,t)})):C(e,t);return I(e,g.counts)&&(N(r)||"boolean"==typeof r)&&(r=Ie()),I(e,g.normalize)&&I(e,g.arrays)&&(r=Array.isArray(t)?t.map((e=>Te.normalize(e))):Te.normalize(t)),r}function C(e,t){if(!o["parse-positional-numbers"]&&"_"===e)return t;if(!I(e,g.strings)&&!I(e,g.bools)&&!Array.isArray(t)){(De(t)&&o["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${t}`)))||!N(t)&&I(e,g.numbers))&&(t=Number(t))}return t}function A(e,t){Object.keys(e).forEach((function(n){const r=e[n],i=t?t+"."+n:n;"object"==typeof r&&null!==r&&!Array.isArray(r)&&o["dot-notation"]?A(r,i):(!M(w,i.split("."))||I(i,g.arrays)&&o["combine-arrays"])&&k(i,r)}))}function P(e,t){if(void 0===l)return;const n="string"==typeof l?l:"",r=Te.env();Object.keys(r).forEach((function(i){if(""===n||0===i.lastIndexOf(n,0)){const s=i.split("__").map((function(e,t){return 0===t&&(e=e.substring(n.length)),Ae(e)}));(t&&g.configs[s.join(".")]||!t)&&!M(e,s)&&k(s.join("."),r[i])}}))}function D(e,t,n,r=!1){Object.keys(n).forEach((function(i){M(e,i.split("."))||(T(e,i.split("."),n[i]),r&&(d[i]=!0),(t[i]||[]).forEach((function(t){M(e,t.split("."))||T(e,t.split("."),n[i])})))}))}function M(e,t){let n=e;o["dot-notation"]||(t=[t.join(".")]),t.slice(0,-1).forEach((function(e){n=n[e]||{}}));const r=t[t.length-1];return"object"==typeof n&&r in n}function T(e,t,n){let r=e;o["dot-notation"]||(t=[t.join(".")]),t.slice(0,-1).forEach((function(e){e=Le(e),"object"==typeof r&&void 0===r[e]&&(r[e]={}),"object"!=typeof r[e]||Array.isArray(r[e])?(Array.isArray(r[e])?r[e].push({}):r[e]=[r[e],{}],r=r[e][r[e].length-1]):r=r[e]}));const i=Le(t[t.length-1]),s=I(t.join("."),g.arrays),a=Array.isArray(n);let c=o["duplicate-arguments-array"];!c&&I(i,g.nargs)&&(c=!0,(!N(r[i])&&1===g.nargs[i]||Array.isArray(r[i])&&r[i].length===g.nargs[i])&&(r[i]=void 0)),n===Ie()?r[i]=Ie(r[i]):Array.isArray(r[i])?c&&s&&a?r[i]=o["flatten-duplicate-arrays"]?r[i].concat(n):(Array.isArray(r[i][0])?r[i]:[r[i]]).concat([n]):c||Boolean(s)!==Boolean(a)?r[i]=r[i].concat([n]):r[i]=n:void 0===r[i]&&s?r[i]=a?n:[n]:!c||void 0===r[i]||I(i,g.counts)||I(i,g.bools)?r[i]=n:r[i]=[r[i],n]}function I(e,t){const n=[].concat(g.aliases[e]||[],e),r=Object.keys(t),i=n.find((e=>r.includes(e)));return!!i&&t[i]}function L(e){const t=Object.keys(g);return[].concat(t.map((e=>g[e]))).some((function(t){return Array.isArray(t)?t.includes(e):t[e]}))}function R(e){return o["unknown-options-as-args"]&&function(e){if(e=e.replace(/^-{3,}/,"--"),e.match(m))return!1;if(function(e){if(e.match(m)||!e.match(/^-[^-]+/))return!1;let t,n=!0;const r=e.slice(1).split("");for(let i=0;i<r.length;i++){if(t=e.slice(i+2),!L(r[i])){n=!1;break}if(r[i+1]&&"="===r[i+1]||"-"===t||/[A-Za-z]/.test(r[i])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(t)||r[i+1]&&r[i+1].match(/\W/))break}return n}(e))return!1;return!function(e,...t){return[].concat(...t).some((function(t){const n=e.match(t);return n&&L(n[1])}))}(e,/^-+([^=]+?)=[\s\S]*$/,y,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}(e)}function B(e){return I(e,g.bools)||I(e,g.counts)||!(`${e}`in a)?(t=function(e){let t=Me.BOOLEAN;return I(e,g.strings)?t=Me.STRING:I(e,g.numbers)?t=Me.NUMBER:I(e,g.bools)?t=Me.BOOLEAN:I(e,g.arrays)&&(t=Me.ARRAY),t}(e),{[Me.BOOLEAN]:!0,[Me.STRING]:"",[Me.NUMBER]:void 0,[Me.ARRAY]:[]}[t]):a[e];var t}function N(e){return void 0===e}return P(w,!0),P(w,!1),function(e){const t=Object.create(null);D(t,g.aliases,a),Object.keys(g.configs).forEach((function(n){const r=e[n]||t[n];if(r)try{let e=null;const t=Te.resolve(Te.cwd(),r),i=g.configs[n];if("function"==typeof i){try{e=i(t)}catch(t){e=t}if(e instanceof Error)return void(b=e)}else e=Te.require(t);A(e)}catch(t){"PermissionDenied"===t.name?b=t:e[n]&&(b=Error(p("Invalid JSON config file: %s",r)))}}))}(w),void 0!==c&&c.forEach((function(e){A(e)})),D(w,g.aliases,a,!0),function(e){let t;const n=new Set;Object.keys(e).forEach((function(r){if(!n.has(r)&&(t=I(r,g.coercions),"function"==typeof t))try{const i=C(r,t(e[r]));[].concat(g.aliases[r]||[],r).forEach((t=>{n.add(t),e[t]=i}))}catch(e){b=e}}))}(w),o["set-placeholder-key"]&&function(e){g.keys.forEach((t=>{~t.indexOf(".")||void 0===e[t]&&(e[t]=void 0)}))}(w),Object.keys(g.counts).forEach((function(e){M(w,e.split("."))||k(e,0)})),h&&v.length&&(w[u]=[]),v.forEach((function(e){w[u].push(e)})),o["camel-case-expansion"]&&o["strip-dashed"]&&Object.keys(w).filter((e=>"--"!==e&&e.includes("-"))).forEach((e=>{delete w[e]})),o["strip-aliased"]&&[].concat(...Object.keys(s).map((e=>s[e]))).forEach((e=>{o["camel-case-expansion"]&&e.includes("-")&&delete w[e.split(".").map((e=>Ae(e))).join(".")],delete w[e]})),{aliases:Object.assign({},g.aliases),argv:Object.assign(E,w),configuration:o,defaulted:Object.assign({},d),error:b,newAliases:Object.assign({},f)}}}({cwd:process.cwd,env:()=>Fe,format:h.format,normalize:c.normalize,resolve:c.resolve,require:e=>{if("undefined"!=typeof require)return require(e);if(e.match(/\.json$/))return JSON.parse(l.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ze=function(e,t){return qe.parse(e.slice(),t).argv};function We(){return process.versions.electron&&!process.defaultApp?0:1}ze.detailed=function(e,t){return qe.parse(e.slice(),t)},ze.camelCase=Ae,ze.decamelize=Pe,ze.looksLikeNumber=De;class Ke extends Error{constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}}var Ve={fs:{readFileSync:l.readFileSync,writeFile:l.writeFile},format:h.format,resolve:c.resolve,exists:e=>{try{return l.statSync(e).isFile()}catch(e){return!1}}};let He;class Ge{constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles="boolean"!=typeof e.updateFiles||e.updateFiles,this.locale=e.locale||"en",this.fallbackToLanguage="boolean"!=typeof e.fallbackToLanguage||e.fallbackToLanguage,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if("string"!=typeof arguments[0])return this._taggedLiteral(arguments[0],...arguments);const t=e.shift();let n=function(){};return"function"==typeof e[e.length-1]&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]=t,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),He.format.apply(He.format,[this.cache[this.locale][t]||t].concat(e))}__n(){const e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift(),r=e.shift();let i=function(){};"function"==typeof e[e.length-1]&&(i=e.pop()),this.cache[this.locale]||this._readLocaleFile();let s=1===r?t:n;if(this.cache[this.locale][t]){s=this.cache[this.locale][t][1===r?"one":"other"]}!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]={one:t,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:i})):i();const o=[s];return~s.indexOf("%d")&&o.push(r),He.format.apply(He.format,o.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.cache[this.locale][t]=e[t])}_taggedLiteral(e,...t){let n="";return e.forEach((function(e,r){const i=t[r+1];n+=e,void 0!==i&&(n+="%s")})),this.__.apply(this,[n].concat([].slice.call(t,1)))}_enqueueWrite(e){this.writeQueue.push(e),1===this.writeQueue.length&&this._processWriteQueue()}_processWriteQueue(){const e=this,t=this.writeQueue[0],n=t.directory,r=t.locale,i=t.cb,s=this._resolveLocaleFile(n,r),o=JSON.stringify(this.cache[r],null,2);He.fs.writeFile(s,o,"utf-8",(function(t){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),i(t)}))}_readLocaleFile(){let e={};const t=this._resolveLocaleFile(this.directory,this.locale);try{He.fs.readFileSync&&(e=JSON.parse(He.fs.readFileSync(t,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+t),"ENOENT"!==n.code)throw n;e={}}this.cache[this.locale]=e}_resolveLocaleFile(e,t){let n=He.resolve(e,"./",t+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~t.lastIndexOf("_")){const r=He.resolve(e,"./",t.split("_")[0]+".json");this._fileExistsSync(r)&&(n=r)}return n}_fileExistsSync(e){return He.exists(e)}}const Ye="loading a directory of commands is not supported yet for ESM";let Qe;try{Qe=u.fileURLToPath("undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href)}catch(e){Qe=process.cwd()}const Je=Qe.substring(0,Qe.lastIndexOf("node_modules"));var Ze,Xe={assert:{notStrictEqual:a.notStrictEqual,strictEqual:a.strictEqual},cliui:function(e){return function(e,t){return xe=t,new Se({width:(null==e?void 0:e.width)||("object"==typeof process&&process.stdout&&process.stdout.columns?process.stdout.columns:80),wrap:null==e?void 0:e.wrap})}(e,{stringWidth:e=>[...e].length,stripAnsi:_e,wrap:Ce})},findUp:function(e,t){let n,r=c.resolve(".",e);for(l.statSync(r).isDirectory()||(r=c.dirname(r));;){if(n=t(r,l.readdirSync(r)),n)return c.resolve(r,n);if(r=c.dirname(n=r),n===r)break}},getEnv:e=>process.env[e],inspect:h.inspect,getCallerFile:()=>{throw new Ke(Ye)},getProcessArgvBin:function(){return process.argv[We()]},mainFilename:Je||process.cwd(),Parser:ze,path:{basename:c.basename,dirname:c.dirname,extname:c.extname,relative:c.relative,resolve:c.resolve},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:(e,t)=>process.emitWarning(e,t),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:void 0!==process.stdout.columns?process.stdout.columns:null},readFileSync:l.readFileSync,require:()=>{throw new Ke("require is not supported by ESM")},requireDirectory:()=>{throw new Ke(Ye)},stringWidth:e=>[...e].length,y18n:(Ze={directory:c.resolve(Qe,"../../../locales"),updateFiles:!1},function(e,t){He=t;const n=new Ge(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}(Ze,Ve))};function et(e,t,n,r){n.assert.notStrictEqual(e,t,r)}function tt(e,t){t.assert.strictEqual(typeof e,"string")}function nt(e){return Object.keys(e)}function rt(e){return!!e&&!!e.then&&"function"==typeof e.then}function it(e){const t=e.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,r=t.shift();if(!r)throw new Error(`No command found in: ${e}`);const i={cmd:r.replace(n,""),demanded:[],optional:[]};return t.forEach(((e,r)=>{let s=!1;e=e.replace(/\s/g,""),/\.+[\]>]/.test(e)&&r===t.length-1&&(s=!0),/^\[/.test(e)?i.optional.push({cmd:e.replace(n,"").split("|"),variadic:s}):i.demanded.push({cmd:e.replace(n,"").split("|"),variadic:s})})),i}const st=["first","second","third","fourth","fifth","sixth"];function ot(e,t,n){try{let r=0;const[i,s,o]="object"==typeof e?[{demanded:[],optional:[]},e,t]:[it(`cmd ${e}`),t,n],a=[].slice.call(s);for(;a.length&&void 0===a[a.length-1];)a.pop();const c=o||a.length;if(c<i.demanded.length)throw new Ke(`Not enough arguments provided. Expected ${i.demanded.length} but received ${a.length}.`);const l=i.demanded.length+i.optional.length;if(c>l)throw new Ke(`Too many arguments provided. Expected max ${l} but received ${c}.`);i.demanded.forEach((e=>{const t=at(a.shift());0===e.cmd.filter((e=>e===t||"*"===e)).length&&ct(t,e.cmd,r),r+=1})),i.optional.forEach((e=>{if(0===a.length)return;const t=at(a.shift());0===e.cmd.filter((e=>e===t||"*"===e)).length&&ct(t,e.cmd,r),r+=1}))}catch(e){console.warn(e.stack)}}function at(e){return Array.isArray(e)?"array":null===e?"null":typeof e}function ct(e,t,n){throw new Ke(`Invalid ${st[n]||"manyith"} argument. Expected ${t.join(" or ")} but received ${e}.`)}class lt{constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,t,n=!0,r=!1){if(ot("<array|function> [boolean] [boolean] [boolean]",[e,t,n],arguments.length),Array.isArray(e)){for(let r=0;r<e.length;r++){if("function"!=typeof e[r])throw Error("middleware must be a function");const i=e[r];i.applyBeforeValidation=t,i.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if("function"==typeof e){const i=e;i.applyBeforeValidation=t,i.global=n,i.mutates=r,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,t){const n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter((e=>{const r=[...n[t]||[],t];return!e.option||!r.includes(e.option)})),e.option=t,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){const e=this.frozens.pop();void 0!==e&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter((e=>e.global))}}function ht(e,t,n,r){return n.reduce(((e,n)=>{if(n.applyBeforeValidation!==r)return e;if(n.mutates){if(n.applied)return e;n.applied=!0}if(rt(e))return e.then((e=>Promise.all([e,n(e,t)]))).then((([e,t])=>Object.assign(e,t)));{const r=n(e,t);return rt(r)?r.then((t=>Object.assign(e,t))):Object.assign(e,r)}}),e)}function ut(e,t,n=(e=>{throw e})){try{const n="function"==typeof e?e():e;return rt(n)?n.then((e=>t(e))):t(n)}catch(e){return n(e)}}const ft=/(^\*)|(^\$0)/;class dt{constructor(e,t,n,r){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=r,this.usage=e,this.globalMiddleware=n,this.validation=t}addDirectory(e,t,n,r){"boolean"!=typeof(r=r||{}).recurse&&(r.recurse=!1),Array.isArray(r.extensions)||(r.extensions=["js"]);const i="function"==typeof r.visit?r.visit:e=>e;r.visit=(e,t,n)=>{const r=i(e,t,n);if(r){if(this.requireCache.has(t))return r;this.requireCache.add(t),this.addHandler(r)}return r},this.shim.requireDirectory({require:t,filename:n},e,r)}addHandler(e,t,n,r,i,s){let o=[];const a=function(e){return e?e.map((e=>(e.applyBeforeValidation=!1,e))):[]}(i);if(r=r||(()=>{}),Array.isArray(e))if(function(e){return e.every((e=>"string"==typeof e))}(e))[e,...o]=e;else for(const t of e)this.addHandler(t);else{if(function(e){return"object"==typeof e&&!Array.isArray(e)}(e)){let t=Array.isArray(e.command)||"string"==typeof e.command?e.command:this.moduleName(e);return e.aliases&&(t=[].concat(t).concat(e.aliases)),void this.addHandler(t,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated)}if(pt(n))return void this.addHandler([e].concat(o),t,n.builder,n.handler,n.middlewares,n.deprecated)}if("string"==typeof e){const i=it(e);o=o.map((e=>it(e).cmd));let c=!1;const l=[i.cmd].concat(o).filter((e=>!ft.test(e)||(c=!0,!1)));0===l.length&&c&&l.push("$0"),c&&(i.cmd=l[0],o=l.slice(1),e=e.replace(ft,i.cmd)),o.forEach((e=>{this.aliasMap[e]=i.cmd})),!1!==t&&this.usage.command(e,t,c,o,s),this.handlers[i.cmd]={original:e,description:t,handler:r,builder:n||{},middlewares:a,deprecated:s,demanded:i.demanded,optional:i.optional},c&&(this.defaultCommand=this.handlers[i.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,t,n,r,i,s){const o=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,a=t.getInternalMethods().getContext(),c=a.commands.slice(),l=!e;e&&(a.commands.push(e),a.fullCommands.push(o.original));const h=this.applyBuilderUpdateUsageAndParse(l,o,t,n.aliases,c,r,i,s);return rt(h)?h.then((e=>this.applyMiddlewareAndGetResult(l,o,e.innerArgv,a,i,e.aliases,t))):this.applyMiddlewareAndGetResult(l,o,h.innerArgv,a,i,h.aliases,t)}applyBuilderUpdateUsageAndParse(e,t,n,r,i,s,o,a){const c=t.builder;let l=n;if(gt(c)){n.getInternalMethods().getUsageInstance().freeze();const h=c(n.getInternalMethods().reset(r),a);if(rt(h))return h.then((r=>{var a;return l=(a=r)&&"function"==typeof a.getInternalMethods?r:n,this.parseAndUpdateUsage(e,t,l,i,s,o)}))}else(function(e){return"object"==typeof e})(c)&&(n.getInternalMethods().getUsageInstance().freeze(),l=n.getInternalMethods().reset(r),Object.keys(t.builder).forEach((e=>{l.option(e,c[e])})));return this.parseAndUpdateUsage(e,t,l,i,s,o)}parseAndUpdateUsage(e,t,n,r,i,s){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(r,t),t.description);const o=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,i,s);return rt(o)?o.then((e=>({aliases:n.parsed.aliases,innerArgv:e}))):{aliases:n.parsed.aliases,innerArgv:o}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&0===e.getInternalMethods().getUsageInstance().getUsage().length}usageFromParentCommandsCommandHandler(e,t){const n=ft.test(t.original)?t.original.replace(ft,"").trim():t.original,r=e.filter((e=>!ft.test(e)));return r.push(n),`$0 ${r.join(" ")}`}handleValidationAndGetResult(e,t,n,r,i,s,o,a){if(!s.getInternalMethods().getHasOutput()){const t=s.getInternalMethods().runValidation(i,a,s.parsed.error,e);n=ut(n,(e=>(t(e),e)))}if(t.handler&&!s.getInternalMethods().getHasOutput()){s.getInternalMethods().setHasOutput();const r=!!s.getOptions().configuration["populate--"];s.getInternalMethods().postProcess(n,r,!1,!1),n=ut(n=ht(n,s,o,!1),(e=>{const n=t.handler(e);return rt(n)?n.then((()=>e)):e})),e||s.getInternalMethods().getUsageInstance().cacheHelpMessage(),rt(n)&&!s.getInternalMethods().hasParseCallback()&&n.catch((e=>{try{s.getInternalMethods().getUsageInstance().fail(null,e)}catch(e){}}))}return e||(r.commands.pop(),r.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,t,n,r,i,s,o){let a={};if(i)return n;o.getInternalMethods().getHasOutput()||(a=this.populatePositionals(t,n,r,o));const c=this.globalMiddleware.getMiddleware().slice(0).concat(t.middlewares),l=ht(n,o,c,!0);return rt(l)?l.then((n=>this.handleValidationAndGetResult(e,t,n,r,s,o,c,a))):this.handleValidationAndGetResult(e,t,l,r,s,o,c,a)}populatePositionals(e,t,n,r){t._=t._.slice(n.commands.length);const i=e.demanded.slice(0),s=e.optional.slice(0),o={};for(this.validation.positionalCount(i.length,t._.length);i.length;){const e=i.shift();this.populatePositional(e,t,o)}for(;s.length;){const e=s.shift();this.populatePositional(e,t,o)}return t._=n.commands.concat(t._.map((e=>""+e))),this.postProcessPositionals(t,o,this.cmdToParseOptions(e.original),r),o}populatePositional(e,t,n){const r=e.cmd[0];e.variadic?n[r]=t._.splice(0).map(String):t._.length&&(n[r]=[String(t._.shift())])}cmdToParseOptions(e){const t={array:[],default:{},alias:{},demand:{}},n=it(e);return n.demanded.forEach((e=>{const[n,...r]=e.cmd;e.variadic&&(t.array.push(n),t.default[n]=[]),t.alias[n]=r,t.demand[n]=!0})),n.optional.forEach((e=>{const[n,...r]=e.cmd;e.variadic&&(t.array.push(n),t.default[n]=[]),t.alias[n]=r})),t}postProcessPositionals(e,t,n,r){const i=Object.assign({},r.getOptions());i.default=Object.assign(n.default,i.default);for(const e of Object.keys(n.alias))i.alias[e]=(i.alias[e]||[]).concat(n.alias[e]);i.array=i.array.concat(n.array),i.config={};const s=[];if(Object.keys(t).forEach((e=>{t[e].map((t=>{i.configuration["unknown-options-as-args"]&&(i.key[e]=!0),s.push(`--${e}`),s.push(t)}))})),!s.length)return;const o=Object.assign({},i.configuration,{"populate--":!1}),a=this.shim.Parser.detailed(s,Object.assign({},i,{configuration:o}));if(a.error)r.getInternalMethods().getUsageInstance().fail(a.error.message,a.error);else{const n=Object.keys(t);Object.keys(t).forEach((e=>{n.push(...a.aliases[e])})),Object.keys(a.argv).forEach((i=>{n.includes(i)&&(t[i]||(t[i]=a.argv[i]),!this.isInConfigs(r,i)&&!this.isDefaulted(r,i)&&Object.prototype.hasOwnProperty.call(e,i)&&Object.prototype.hasOwnProperty.call(a.argv,i)&&(Array.isArray(e[i])||Array.isArray(a.argv[i]))?e[i]=[].concat(e[i],a.argv[i]):e[i]=a.argv[i])}))}}isDefaulted(e,t){const{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,t)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(t))}isInConfigs(e,t){const{configObjects:n}=e.getOptions();return n.some((e=>Object.prototype.hasOwnProperty.call(e,t)))||n.some((e=>Object.prototype.hasOwnProperty.call(e,this.shim.Parser.camelCase(t))))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){const t=ft.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(t,this.defaultCommand.description)}const t=this.defaultCommand.builder;if(gt(t))return t(e,!0);pt(t)||Object.keys(t).forEach((n=>{e.option(n,t[n])}))}moduleName(e){const t=function(e){if("undefined"==typeof require)return null;for(let t,n=0,r=Object.keys(require.cache);n<r.length;n++)if(t=require.cache[r[n]],t.exports===e)return t;return null}(e);if(!t)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(t.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:t,desc:n}){for(const r of[e,t,n]){if("string"==typeof r||!1===r)return r;et(r,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){const e=this.frozens.pop();et(e,void 0,this.shim),({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e)}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}}function pt(e){return"object"==typeof e&&!!e.builder&&"function"==typeof e.handler}function gt(e){return"function"==typeof e}function mt(e={},t=(()=>!0)){const n={};return nt(e).forEach((r=>{t(r,e[r])&&(n[r]=e[r])})),n}function yt(e){"undefined"!=typeof process&&[process.stdout,process.stderr].forEach((t=>{const n=t;n._handle&&n.isTTY&&"function"==typeof n._handle.setBlocking&&n._handle.setBlocking(e)}))}function bt(e){return"boolean"==typeof e}function vt(e,t){const n=t.y18n.__,r={},i=[];r.failFn=function(e){i.push(e)};let s=null,o=null,a=!0;r.showHelpOnFail=function(t=!0,n){const[i,c]="string"==typeof t?[!0,t]:[t,n];return e.getInternalMethods().isGlobalContext()&&(o=c),s=c,a=i,r};let c=!1;r.fail=function(t,n){const l=e.getInternalMethods().getLoggerInstance();if(!i.length){if(e.getExitProcess()&&yt(!0),!c){c=!0,a&&(e.showHelp("error"),l.error()),(t||n)&&l.error(t||n);const r=s||o;r&&((t||n)&&l.error(""),l.error(r))}if(n=n||new Ke(t),e.getExitProcess())return e.exit(1);if(e.getInternalMethods().hasParseCallback())return e.exit(1,n);throw n}for(let e=i.length-1;e>=0;--e){const s=i[e];if(bt(s)){if(n)throw n;if(t)throw Error(t)}else s(t,n,r)}};let l=[],h=!1;r.usage=(e,t)=>null===e?(h=!0,l=[],r):(h=!1,l.push([e,t||""]),r),r.getUsage=()=>l,r.getUsageDisabled=()=>h,r.getPositionalGroupName=()=>n("Positionals:");let u=[];r.example=(e,t)=>{u.push([e,t||""])};let f=[];r.command=function(e,t,n,r,i=!1){n&&(f=f.map((e=>(e[2]=!1,e)))),f.push([e,t||"",n,r,i])},r.getCommands=()=>f;let d={};r.describe=function(e,t){Array.isArray(e)?e.forEach((e=>{r.describe(e,t)})):"object"==typeof e?Object.keys(e).forEach((t=>{r.describe(t,e[t])})):d[e]=t},r.getDescriptions=()=>d;let p=[];r.epilog=e=>{p.push(e)};let g,m=!1;r.wrap=e=>{m=!0,g=e},r.getWrap=()=>t.getEnv("YARGS_DISABLE_WRAP")?null:(m||(g=function(){const e=80;return t.process.stdColumns?Math.min(e,t.process.stdColumns):e}(),m=!0),g);const y="__yargsString__:";function b(e,n,r){let i=0;return Array.isArray(e)||(e=Object.values(e).map((e=>[e]))),e.forEach((e=>{i=Math.max(t.stringWidth(r?`${r} ${Ot(e[0])}`:Ot(e[0]))+Et(e[0]),i)})),n&&(i=Math.min(i,parseInt((.5*n).toString(),10))),i}let v;function w(t){return e.getOptions().hiddenOptions.indexOf(t)<0||e.parsed.argv[e.getOptions().showHiddenOpt]}function E(e,t){let r=`[${n("default:")} `;if(void 0===e&&!t)return null;if(t)r+=t;else switch(typeof e){case"string":r+=`"${e}"`;break;case"object":r+=JSON.stringify(e);break;default:r+=e}return`${r}]`}r.deferY18nLookup=e=>y+e,r.help=function(){if(v)return v;!function(){const t=e.getDemandedOptions(),n=e.getOptions();(Object.keys(n.alias)||[]).forEach((i=>{n.alias[i].forEach((s=>{d[s]&&r.describe(i,d[s]),s in t&&e.demandOption(i,t[s]),n.boolean.includes(s)&&e.boolean(i),n.count.includes(s)&&e.count(i),n.string.includes(s)&&e.string(i),n.normalize.includes(s)&&e.normalize(i),n.array.includes(s)&&e.array(i),n.number.includes(s)&&e.number(i)}))}))}();const i=e.customScriptName?e.$0:t.path.basename(e.$0),s=e.getDemandedOptions(),o=e.getDemandedCommands(),a=e.getDeprecatedOptions(),c=e.getGroups(),g=e.getOptions();let m=[];m=m.concat(Object.keys(d)),m=m.concat(Object.keys(s)),m=m.concat(Object.keys(o)),m=m.concat(Object.keys(g.default)),m=m.filter(w),m=Object.keys(m.reduce(((e,t)=>("_"!==t&&(e[t]=!0),e)),{}));const O=r.getWrap(),x=t.cliui({width:O,wrap:!!O});if(!h)if(l.length)l.forEach((e=>{x.div({text:`${e[0].replace(/\$0/g,i)}`}),e[1]&&x.div({text:`${e[1]}`,padding:[1,0,0,0]})})),x.div();else if(f.length){let e=null;e=o._?`${i} <${n("command")}>\n`:`${i} [${n("command")}]\n`,x.div(`${e}`)}if(f.length>1||1===f.length&&!f[0][2]){x.div(n("Commands:"));const t=e.getInternalMethods().getContext(),r=t.commands.length?`${t.commands.join(" ")} `:"";!0===e.getInternalMethods().getParserConfiguration()["sort-commands"]&&(f=f.sort(((e,t)=>e[0].localeCompare(t[0]))));const s=i?`${i} `:"";f.forEach((e=>{const t=`${s}${r}${e[0].replace(/^\$0 ?/,"")}`;x.span({text:t,padding:[0,2,0,2],width:b(f,O,`${i}${r}`)+4},{text:e[1]});const o=[];e[2]&&o.push(`[${n("default")}]`),e[3]&&e[3].length&&o.push(`[${n("aliases:")} ${e[3].join(", ")}]`),e[4]&&("string"==typeof e[4]?o.push(`[${n("deprecated: %s",e[4])}]`):o.push(`[${n("deprecated")}]`)),o.length?x.div({text:o.join(" "),padding:[0,0,0,2],align:"right"}):x.div()})),x.div()}const S=(Object.keys(g.alias)||[]).concat(Object.keys(e.parsed.newAliases)||[]);m=m.filter((t=>!e.parsed.newAliases[t]&&S.every((e=>-1===(g.alias[e]||[]).indexOf(t)))));const k=n("Options:");c[k]||(c[k]=[]),function(e,t,n,r){let i=[],s=null;Object.keys(n).forEach((e=>{i=i.concat(n[e])})),e.forEach((e=>{s=[e].concat(t[e]),s.some((e=>-1!==i.indexOf(e)))||n[r].push(e)}))}(m,g.alias,c,k);const j=e=>/^--/.test(Ot(e)),_=Object.keys(c).filter((e=>c[e].length>0)).map((e=>({groupName:e,normalizedKeys:c[e].filter(w).map((e=>{if(S.includes(e))return e;for(let t,n=0;void 0!==(t=S[n]);n++)if((g.alias[t]||[]).includes(e))return t;return e}))}))).filter((({normalizedKeys:e})=>e.length>0)).map((({groupName:e,normalizedKeys:t})=>{const n=t.reduce(((t,n)=>(t[n]=[n].concat(g.alias[n]||[]).map((t=>e===r.getPositionalGroupName()?t:(/^[0-9]$/.test(t)?g.boolean.includes(n)?"-":"--":t.length>1?"--":"-")+t)).sort(((e,t)=>j(e)===j(t)?0:j(e)?1:-1)).join(", "),t)),{});return{groupName:e,normalizedKeys:t,switches:n}}));if(_.filter((({groupName:e})=>e!==r.getPositionalGroupName())).some((({normalizedKeys:e,switches:t})=>!e.every((e=>j(t[e])))))&&_.filter((({groupName:e})=>e!==r.getPositionalGroupName())).forEach((({normalizedKeys:e,switches:t})=>{e.forEach((e=>{var n,r;j(t[e])&&(t[e]=(n=t[e],r="-x, ".length,wt(n)?{text:n.text,indentation:n.indentation+r}:{text:n,indentation:r}))}))})),_.forEach((({groupName:t,normalizedKeys:i,switches:o})=>{x.div(t),i.forEach((t=>{const i=o[t];let c=d[t]||"",l=null;c.includes(y)&&(c=n(c.substring(y.length))),g.boolean.includes(t)&&(l=`[${n("boolean")}]`),g.count.includes(t)&&(l=`[${n("count")}]`),g.string.includes(t)&&(l=`[${n("string")}]`),g.normalize.includes(t)&&(l=`[${n("string")}]`),g.array.includes(t)&&(l=`[${n("array")}]`),g.number.includes(t)&&(l=`[${n("number")}]`);const h=[t in a?(u=a[t],"string"==typeof u?`[${n("deprecated: %s",u)}]`:`[${n("deprecated")}]`):null,l,t in s?`[${n("required")}]`:null,g.choices&&g.choices[t]?`[${n("choices:")} ${r.stringifiedValues(g.choices[t])}]`:null,E(g.default[t],g.defaultDescription[t])].filter(Boolean).join(" ");var u;x.span({text:Ot(i),padding:[0,2,0,2+Et(i)],width:b(o,O)+4},c);const f=!0===e.getInternalMethods().getUsageConfiguration()["hide-types"];h&&!f?x.div({text:h,padding:[0,0,0,2],align:"right"}):x.div()})),x.div()})),u.length&&(x.div(n("Examples:")),u.forEach((e=>{e[0]=e[0].replace(/\$0/g,i)})),u.forEach((e=>{""===e[1]?x.div({text:e[0],padding:[0,2,0,2]}):x.div({text:e[0],padding:[0,2,0,2],width:b(u,O)+4},{text:e[1]})})),x.div()),p.length>0){const e=p.map((e=>e.replace(/\$0/g,i))).join("\n");x.div(`${e}\n`)}return x.toString().replace(/\s*$/,"")},r.cacheHelpMessage=function(){v=this.help()},r.clearCachedHelpMessage=function(){v=void 0},r.hasCachedHelpMessage=function(){return!!v},r.showHelp=t=>{const n=e.getInternalMethods().getLoggerInstance();t||(t="error");("function"==typeof t?t:n[t])(r.help())},r.functionDescription=e=>["(",e.name?t.Parser.decamelize(e.name,"-"):n("generated-value"),")"].join(""),r.stringifiedValues=function(e,t){let n="";const r=t||", ",i=[].concat(e);return e&&i.length?(i.forEach((e=>{n.length&&(n+=r),n+=JSON.stringify(e)})),n):n};let O=null;r.version=e=>{O=e},r.showVersion=t=>{const n=e.getInternalMethods().getLoggerInstance();t||(t="error");("function"==typeof t?t:n[t])(O)},r.reset=function(e){return s=null,c=!1,l=[],h=!1,p=[],u=[],f=[],d=mt(d,(t=>!e[t])),r};const x=[];return r.freeze=function(){x.push({failMessage:s,failureOutput:c,usages:l,usageDisabled:h,epilogs:p,examples:u,commands:f,descriptions:d})},r.unfreeze=function(e=!1){const t=x.pop();t&&(e?(d={...t.descriptions,...d},f=[...t.commands,...f],l=[...t.usages,...l],u=[...t.examples,...u],p=[...t.epilogs,...p]):({failMessage:s,failureOutput:c,usages:l,usageDisabled:h,epilogs:p,examples:u,commands:f,descriptions:d}=t))},r}function wt(e){return"object"==typeof e}function Et(e){return wt(e)?e.indentation:0}function Ot(e){return wt(e)?e.text:e}class xt{constructor(e,t,n,r){var i,s,o;this.yargs=e,this.usage=t,this.command=n,this.shim=r,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=null!==(o=(null===(i=this.shim.getEnv("SHELL"))||void 0===i?void 0:i.includes("zsh"))||(null===(s=this.shim.getEnv("ZSH_NAME"))||void 0===s?void 0:s.includes("zsh")))&&void 0!==o&&o}defaultCompletion(e,t,n,r){const i=this.command.getCommandHandlers();for(let t=0,n=e.length;t<n;++t)if(i[e[t]]&&i[e[t]].builder){const n=i[e[t]].builder;if(gt(n)){this.indexAfterLastReset=t+1;const e=this.yargs.getInternalMethods().reset();return n(e,!0),e.argv}}const s=[];this.commandCompletions(s,e,n),this.optionCompletions(s,e,t,n),this.choicesFromOptionsCompletions(s,e,t,n),this.choicesFromPositionalsCompletions(s,e,t,n),r(null,s)}commandCompletions(e,t,n){const r=this.yargs.getInternalMethods().getContext().commands;n.match(/^-/)||r[r.length-1]===n||this.previousArgHasChoices(t)||this.usage.getCommands().forEach((n=>{const r=it(n[0]).cmd;if(-1===t.indexOf(r))if(this.zshShell){const t=n[1]||"";e.push(r.replace(/:/g,"\\:")+":"+t)}else e.push(r)}))}optionCompletions(e,t,n,r){if((r.match(/^-/)||""===r&&0===e.length)&&!this.previousArgHasChoices(t)){const n=this.yargs.getOptions(),i=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(n.key).forEach((s=>{const o=!!n.configuration["boolean-negation"]&&n.boolean.includes(s);i.includes(s)||n.hiddenOptions.includes(s)||this.argsContainKey(t,s,o)||(this.completeOptionKey(s,e,r),o&&n.default[s]&&this.completeOptionKey(`no-${s}`,e,r))}))}}choicesFromOptionsCompletions(e,t,n,r){if(this.previousArgHasChoices(t)){const n=this.getPreviousArgChoices(t);n&&n.length>0&&e.push(...n.map((e=>e.replace(/:/g,"\\:"))))}}choicesFromPositionalsCompletions(e,t,n,r){if(""===r&&e.length>0&&this.previousArgHasChoices(t))return;const i=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],s=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),o=i[n._.length-s-1];if(!o)return;const a=this.yargs.getOptions().choices[o]||[];for(const t of a)t.startsWith(r)&&e.push(t.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let t=e[e.length-1],n="";if(!t.startsWith("-")&&e.length>1&&(n=t,t=e[e.length-2]),!t.startsWith("-"))return;const r=t.replace(/^-+/,""),i=this.yargs.getOptions(),s=[r,...this.yargs.getAliases()[r]||[]];let o;for(const e of s)if(Object.prototype.hasOwnProperty.call(i.key,e)&&Array.isArray(i.choices[e])){o=i.choices[e];break}return o?o.filter((e=>!n||e.startsWith(n))):void 0}previousArgHasChoices(e){const t=this.getPreviousArgChoices(e);return void 0!==t&&t.length>0}argsContainKey(e,t,n){const r=t=>-1!==e.indexOf((/^[^0-9]$/.test(t)?"-":"--")+t);if(r(t))return!0;if(n&&r(`no-${t}`))return!0;if(this.aliases)for(const e of this.aliases[t])if(r(e))return!0;return!1}completeOptionKey(e,t,n){var r,i,s;const o=this.usage.getDescriptions(),a=!/^--/.test(n)&&(e=>/^[^0-9]$/.test(e))(e)?"-":"--";if(this.zshShell){const n=null===(r=null==this?void 0:this.aliases)||void 0===r?void 0:r[e].find((e=>{const t=o[e];return"string"==typeof t&&t.length>0})),c=n?o[n]:void 0,l=null!==(s=null!==(i=o[e])&&void 0!==i?i:c)&&void 0!==s?s:"";t.push(a+`${e.replace(/:/g,"\\:")}:${l.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`)}else t.push(a+e)}customCompletion(e,t,n,r){if(et(this.customCompletionFunction,null,this.shim),this.customCompletionFunction.length<3){const e=this.customCompletionFunction(n,t);return rt(e)?e.then((e=>{this.shim.process.nextTick((()=>{r(null,e)}))})).catch((e=>{this.shim.process.nextTick((()=>{r(e,void 0)}))})):r(null,e)}return function(e){return e.length>3}(this.customCompletionFunction)?this.customCompletionFunction(n,t,((i=r)=>this.defaultCompletion(e,t,n,i)),(e=>{r(null,e)})):this.customCompletionFunction(n,t,(e=>{r(null,e)}))}getCompletion(e,t){const n=e.length?e[e.length-1]:"",r=this.yargs.parse(e,!0),i=this.customCompletionFunction?r=>this.customCompletion(e,r,n,t):r=>this.defaultCompletion(e,r,n,t);return rt(r)?r.then(i):i(r)}generateCompletionScript(e,t){let n=this.zshShell?'#compdef {{app_name}}\n###-begin-{{app_name}}-completions-###\n#\n# yargs command completion script\n#\n# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc\n#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.\n#\n_{{app_name}}_yargs_completions()\n{\n  local reply\n  local si=$IFS\n  IFS=$\'\n\' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "${words[@]}"))\n  IFS=$si\n  _describe \'values\' reply\n}\ncompdef _{{app_name}}_yargs_completions {{app_name}}\n###-end-{{app_name}}-completions-###\n':'###-begin-{{app_name}}-completions-###\n#\n# yargs command completion script\n#\n# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc\n#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.\n#\n_{{app_name}}_yargs_completions()\n{\n    local cur_word args type_list\n\n    cur_word="${COMP_WORDS[COMP_CWORD]}"\n    args=("${COMP_WORDS[@]}")\n\n    # ask yargs to generate completions.\n    type_list=$({{app_path}} --get-yargs-completions "${args[@]}")\n\n    COMPREPLY=( $(compgen -W "${type_list}" -- ${cur_word}) )\n\n    # if no match was found, fall back to filename completion\n    if [ ${#COMPREPLY[@]} -eq 0 ]; then\n      COMPREPLY=()\n    fi\n\n    return 0\n}\ncomplete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}\n###-end-{{app_name}}-completions-###\n';const r=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,r),n=n.replace(/{{completion_command}}/g,t),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}}function St(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const n=[];let r,i;for(r=0;r<=t.length;r++)n[r]=[r];for(i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:r>1&&i>1&&t.charAt(r-2)===e.charAt(i-1)&&t.charAt(r-1)===e.charAt(i-2)?n[r][i]=n[r-2][i-2]+1:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]}const kt=["$0","--","_"];let jt,_t=[];function Ct(e,t,n,r){jt=r;let i={};if(Object.prototype.hasOwnProperty.call(e,"extends")){if("string"!=typeof e.extends)return i;const r=/\.json|\..*rc$/.test(e.extends);let s=null;if(r)s=function(e,t){return jt.path.resolve(e,t)}(t,e.extends);else try{s=require.resolve(e.extends)}catch(t){return e}!function(e){if(_t.indexOf(e)>-1)throw new Ke(`Circular extended configurations: '${e}'.`)}(s),_t.push(s),i=r?JSON.parse(jt.readFileSync(s,"utf8")):require(e.extends),delete e.extends,i=Ct(i,jt.path.dirname(s),n,jt)}return _t=[],n?At(i,e):Object.assign({},i,e)}function At(e,t){const n={};function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}Object.assign(n,e);for(const i of Object.keys(t))r(t[i])&&r(n[i])?n[i]=At(e[i],t[i]):n[i]=t[i];return n}var Pt,Dt,Mt,Tt,It,Lt,Rt,Bt,Nt,$t,Ut,Ft,qt,zt,Wt,Kt,Vt,Ht,Gt,Yt,Qt,Jt,Zt,Xt,en,tn,nn,rn,sn,on,an,cn,ln,hn,un,fn=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},dn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const pn=Symbol("copyDoubleDash"),gn=Symbol("copyDoubleDash"),mn=Symbol("deleteFromParserHintObject"),yn=Symbol("emitWarning"),bn=Symbol("freeze"),vn=Symbol("getDollarZero"),wn=Symbol("getParserConfiguration"),En=Symbol("getUsageConfiguration"),On=Symbol("guessLocale"),xn=Symbol("guessVersion"),Sn=Symbol("parsePositionalNumbers"),kn=Symbol("pkgUp"),jn=Symbol("populateParserHintArray"),_n=Symbol("populateParserHintSingleValueDictionary"),Cn=Symbol("populateParserHintArrayDictionary"),An=Symbol("populateParserHintDictionary"),Pn=Symbol("sanitizeKey"),Dn=Symbol("setKey"),Mn=Symbol("unfreeze"),Tn=Symbol("validateAsync"),In=Symbol("getCommandInstance"),Ln=Symbol("getContext"),Rn=Symbol("getHasOutput"),Bn=Symbol("getLoggerInstance"),Nn=Symbol("getParseContext"),$n=Symbol("getUsageInstance"),Un=Symbol("getValidationInstance"),Fn=Symbol("hasParseCallback"),qn=Symbol("isGlobalContext"),zn=Symbol("postProcess"),Wn=Symbol("rebase"),Kn=Symbol("reset"),Vn=Symbol("runYargsParserAndExecuteCommands"),Hn=Symbol("runValidation"),Gn=Symbol("setHasOutput"),Yn=Symbol("kTrackManuallySetKeys");class Qn{constructor(e=[],t,n,r){this.customScriptName=!1,this.parsed=!1,Pt.set(this,void 0),Dt.set(this,void 0),Mt.set(this,{commands:[],fullCommands:[]}),Tt.set(this,null),It.set(this,null),Lt.set(this,"show-hidden"),Rt.set(this,null),Bt.set(this,!0),Nt.set(this,{}),$t.set(this,!0),Ut.set(this,[]),Ft.set(this,void 0),qt.set(this,{}),zt.set(this,!1),Wt.set(this,null),Kt.set(this,!0),Vt.set(this,void 0),Ht.set(this,""),Gt.set(this,void 0),Yt.set(this,void 0),Qt.set(this,{}),Jt.set(this,null),Zt.set(this,null),Xt.set(this,{}),en.set(this,{}),tn.set(this,void 0),nn.set(this,!1),rn.set(this,void 0),sn.set(this,!1),on.set(this,!1),an.set(this,!1),cn.set(this,void 0),ln.set(this,{}),hn.set(this,null),un.set(this,void 0),fn(this,rn,r,"f"),fn(this,tn,e,"f"),fn(this,Dt,t,"f"),fn(this,Yt,n,"f"),fn(this,Ft,new lt(this),"f"),this.$0=this[vn](),this[Kn](),fn(this,Pt,dn(this,Pt,"f"),"f"),fn(this,cn,dn(this,cn,"f"),"f"),fn(this,un,dn(this,un,"f"),"f"),fn(this,Gt,dn(this,Gt,"f"),"f"),dn(this,Gt,"f").showHiddenOpt=dn(this,Lt,"f"),fn(this,Vt,this[gn](),"f")}addHelpOpt(e,t){return ot("[string|boolean] [string]",[e,t],arguments.length),dn(this,Wt,"f")&&(this[mn](dn(this,Wt,"f")),fn(this,Wt,null,"f")),!1===e&&void 0===t||(fn(this,Wt,"string"==typeof e?e:"help","f"),this.boolean(dn(this,Wt,"f")),this.describe(dn(this,Wt,"f"),t||dn(this,cn,"f").deferY18nLookup("Show help"))),this}help(e,t){return this.addHelpOpt(e,t)}addShowHiddenOpt(e,t){if(ot("[string|boolean] [string]",[e,t],arguments.length),!1===e&&void 0===t)return this;const n="string"==typeof e?e:dn(this,Lt,"f");return this.boolean(n),this.describe(n,t||dn(this,cn,"f").deferY18nLookup("Show hidden options")),dn(this,Gt,"f").showHiddenOpt=n,this}showHidden(e,t){return this.addShowHiddenOpt(e,t)}alias(e,t){return ot("<object|string|array> [string|array]",[e,t],arguments.length),this[Cn](this.alias.bind(this),"alias",e,t),this}array(e){return ot("<array|string>",[e],arguments.length),this[jn]("array",e),this[Yn](e),this}boolean(e){return ot("<array|string>",[e],arguments.length),this[jn]("boolean",e),this[Yn](e),this}check(e,t){return ot("<function> [boolean]",[e,t],arguments.length),this.middleware(((t,n)=>ut((()=>e(t,n.getOptions())),(n=>(n?("string"==typeof n||n instanceof Error)&&dn(this,cn,"f").fail(n.toString(),n):dn(this,cn,"f").fail(dn(this,rn,"f").y18n.__("Argument check failed: %s",e.toString())),t)),(e=>(dn(this,cn,"f").fail(e.message?e.message:e.toString(),e),t)))),!1,t),this}choices(e,t){return ot("<object|string|array> [string|array]",[e,t],arguments.length),this[Cn](this.choices.bind(this),"choices",e,t),this}coerce(e,t){if(ot("<object|string|array> [function]",[e,t],arguments.length),Array.isArray(e)){if(!t)throw new Ke("coerce callback must be provided");for(const n of e)this.coerce(n,t);return this}if("object"==typeof e){for(const t of Object.keys(e))this.coerce(t,e[t]);return this}if(!t)throw new Ke("coerce callback must be provided");return dn(this,Gt,"f").key[e]=!0,dn(this,Ft,"f").addCoerceMiddleware(((n,r)=>{let i;return Object.prototype.hasOwnProperty.call(n,e)?ut((()=>(i=r.getAliases(),t(n[e]))),(t=>{n[e]=t;const s=r.getInternalMethods().getParserConfiguration()["strip-aliased"];if(i[e]&&!0!==s)for(const r of i[e])n[r]=t;return n}),(e=>{throw new Ke(e.message)})):n}),e),this}conflicts(e,t){return ot("<string|object> [string|array]",[e,t],arguments.length),dn(this,un,"f").conflicts(e,t),this}config(e="config",t,n){return ot("[object|string] [string|function] [function]",[e,t,n],arguments.length),"object"!=typeof e||Array.isArray(e)?("function"==typeof t&&(n=t,t=void 0),this.describe(e,t||dn(this,cn,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach((e=>{dn(this,Gt,"f").config[e]=n||!0})),this):(e=Ct(e,dn(this,Dt,"f"),this[wn]()["deep-merge-config"]||!1,dn(this,rn,"f")),dn(this,Gt,"f").configObjects=(dn(this,Gt,"f").configObjects||[]).concat(e),this)}completion(e,t,n){return ot("[string] [string|boolean|function] [function]",[e,t,n],arguments.length),"function"==typeof t&&(n=t,t=void 0),fn(this,It,e||dn(this,It,"f")||"completion","f"),t||!1===t||(t="generate completion script"),this.command(dn(this,It,"f"),t),n&&dn(this,Tt,"f").registerFunction(n),this}command(e,t,n,r,i,s){return ot("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,t,n,r,i,s],arguments.length),dn(this,Pt,"f").addHandler(e,t,n,r,i,s),this}commands(e,t,n,r,i,s){return this.command(e,t,n,r,i,s)}commandDir(e,t){ot("<string> [object]",[e,t],arguments.length);const n=dn(this,Yt,"f")||dn(this,rn,"f").require;return dn(this,Pt,"f").addDirectory(e,n,dn(this,rn,"f").getCallerFile(),t),this}count(e){return ot("<array|string>",[e],arguments.length),this[jn]("count",e),this[Yn](e),this}default(e,t,n){return ot("<object|string|array> [*] [string]",[e,t,n],arguments.length),n&&(tt(e,dn(this,rn,"f")),dn(this,Gt,"f").defaultDescription[e]=n),"function"==typeof t&&(tt(e,dn(this,rn,"f")),dn(this,Gt,"f").defaultDescription[e]||(dn(this,Gt,"f").defaultDescription[e]=dn(this,cn,"f").functionDescription(t)),t=t.call()),this[_n](this.default.bind(this),"default",e,t),this}defaults(e,t,n){return this.default(e,t,n)}demandCommand(e=1,t,n,r){return ot("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,t,n,r],arguments.length),"number"!=typeof t&&(n=t,t=1/0),this.global("_",!1),dn(this,Gt,"f").demandedCommands._={min:e,max:t,minMsg:n,maxMsg:r},this}demand(e,t,n){return Array.isArray(t)?(t.forEach((e=>{et(n,!0,dn(this,rn,"f")),this.demandOption(e,n)})),t=1/0):"number"!=typeof t&&(n=t,t=1/0),"number"==typeof e?(et(n,!0,dn(this,rn,"f")),this.demandCommand(e,t,n,n)):Array.isArray(e)?e.forEach((e=>{et(n,!0,dn(this,rn,"f")),this.demandOption(e,n)})):"string"==typeof n?this.demandOption(e,n):!0!==n&&void 0!==n||this.demandOption(e),this}demandOption(e,t){return ot("<object|string|array> [string]",[e,t],arguments.length),this[_n](this.demandOption.bind(this),"demandedOptions",e,t),this}deprecateOption(e,t){return ot("<string> [string|boolean]",[e,t],arguments.length),dn(this,Gt,"f").deprecatedOptions[e]=t,this}describe(e,t){return ot("<object|string|array> [string]",[e,t],arguments.length),this[Dn](e,!0),dn(this,cn,"f").describe(e,t),this}detectLocale(e){return ot("<boolean>",[e],arguments.length),fn(this,Bt,e,"f"),this}env(e){return ot("[string|boolean]",[e],arguments.length),!1===e?delete dn(this,Gt,"f").envPrefix:dn(this,Gt,"f").envPrefix=e||"",this}epilogue(e){return ot("<string>",[e],arguments.length),dn(this,cn,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,t){return ot("<string|array> [string]",[e,t],arguments.length),Array.isArray(e)?e.forEach((e=>this.example(...e))):dn(this,cn,"f").example(e,t),this}exit(e,t){fn(this,zt,!0,"f"),fn(this,Rt,t,"f"),dn(this,$t,"f")&&dn(this,rn,"f").process.exit(e)}exitProcess(e=!0){return ot("[boolean]",[e],arguments.length),fn(this,$t,e,"f"),this}fail(e){if(ot("<function|boolean>",[e],arguments.length),"boolean"==typeof e&&!1!==e)throw new Ke("Invalid first argument. Expected function or boolean 'false'");return dn(this,cn,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,t){return ot("<array> [function]",[e,t],arguments.length),t?dn(this,Tt,"f").getCompletion(e,t):new Promise(((t,n)=>{dn(this,Tt,"f").getCompletion(e,((e,r)=>{e?n(e):t(r)}))}))}getDemandedOptions(){return ot([],0),dn(this,Gt,"f").demandedOptions}getDemandedCommands(){return ot([],0),dn(this,Gt,"f").demandedCommands}getDeprecatedOptions(){return ot([],0),dn(this,Gt,"f").deprecatedOptions}getDetectLocale(){return dn(this,Bt,"f")}getExitProcess(){return dn(this,$t,"f")}getGroups(){return Object.assign({},dn(this,qt,"f"),dn(this,en,"f"))}getHelp(){if(fn(this,zt,!0,"f"),!dn(this,cn,"f").hasCachedHelpMessage()){if(!this.parsed){const e=this[Vn](dn(this,tn,"f"),void 0,void 0,0,!0);if(rt(e))return e.then((()=>dn(this,cn,"f").help()))}const e=dn(this,Pt,"f").runDefaultBuilderOn(this);if(rt(e))return e.then((()=>dn(this,cn,"f").help()))}return Promise.resolve(dn(this,cn,"f").help())}getOptions(){return dn(this,Gt,"f")}getStrict(){return dn(this,sn,"f")}getStrictCommands(){return dn(this,on,"f")}getStrictOptions(){return dn(this,an,"f")}global(e,t){return ot("<string|array> [boolean]",[e,t],arguments.length),e=[].concat(e),!1!==t?dn(this,Gt,"f").local=dn(this,Gt,"f").local.filter((t=>-1===e.indexOf(t))):e.forEach((e=>{dn(this,Gt,"f").local.includes(e)||dn(this,Gt,"f").local.push(e)})),this}group(e,t){ot("<string|array> <string>",[e,t],arguments.length);const n=dn(this,en,"f")[t]||dn(this,qt,"f")[t];dn(this,en,"f")[t]&&delete dn(this,en,"f")[t];const r={};return dn(this,qt,"f")[t]=(n||[]).concat(e).filter((e=>!r[e]&&(r[e]=!0))),this}hide(e){return ot("<string>",[e],arguments.length),dn(this,Gt,"f").hiddenOptions.push(e),this}implies(e,t){return ot("<string|object> [number|string|array]",[e,t],arguments.length),dn(this,un,"f").implies(e,t),this}locale(e){return ot("[string]",[e],arguments.length),void 0===e?(this[On](),dn(this,rn,"f").y18n.getLocale()):(fn(this,Bt,!1,"f"),dn(this,rn,"f").y18n.setLocale(e),this)}middleware(e,t,n){return dn(this,Ft,"f").addMiddleware(e,!!t,n)}nargs(e,t){return ot("<string|object|array> [number]",[e,t],arguments.length),this[_n](this.nargs.bind(this),"narg",e,t),this}normalize(e){return ot("<array|string>",[e],arguments.length),this[jn]("normalize",e),this}number(e){return ot("<array|string>",[e],arguments.length),this[jn]("number",e),this[Yn](e),this}option(e,t){if(ot("<string|object> [object]",[e,t],arguments.length),"object"==typeof e)Object.keys(e).forEach((t=>{this.options(t,e[t])}));else{"object"!=typeof t&&(t={}),this[Yn](e),!dn(this,hn,"f")||"version"!==e&&"version"!==(null==t?void 0:t.alias)||this[yn](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join("\n"),void 0,"versionWarning"),dn(this,Gt,"f").key[e]=!0,t.alias&&this.alias(e,t.alias);const n=t.deprecate||t.deprecated;n&&this.deprecateOption(e,n);const r=t.demand||t.required||t.require;r&&this.demand(e,r),t.demandOption&&this.demandOption(e,"string"==typeof t.demandOption?t.demandOption:void 0),t.conflicts&&this.conflicts(e,t.conflicts),"default"in t&&this.default(e,t.default),void 0!==t.implies&&this.implies(e,t.implies),void 0!==t.nargs&&this.nargs(e,t.nargs),t.config&&this.config(e,t.configParser),t.normalize&&this.normalize(e),t.choices&&this.choices(e,t.choices),t.coerce&&this.coerce(e,t.coerce),t.group&&this.group(e,t.group),(t.boolean||"boolean"===t.type)&&(this.boolean(e),t.alias&&this.boolean(t.alias)),(t.array||"array"===t.type)&&(this.array(e),t.alias&&this.array(t.alias)),(t.number||"number"===t.type)&&(this.number(e),t.alias&&this.number(t.alias)),(t.string||"string"===t.type)&&(this.string(e),t.alias&&this.string(t.alias)),(t.count||"count"===t.type)&&this.count(e),"boolean"==typeof t.global&&this.global(e,t.global),t.defaultDescription&&(dn(this,Gt,"f").defaultDescription[e]=t.defaultDescription),t.skipValidation&&this.skipValidation(e);const i=t.describe||t.description||t.desc,s=dn(this,cn,"f").getDescriptions();Object.prototype.hasOwnProperty.call(s,e)&&"string"!=typeof i||this.describe(e,i),t.hidden&&this.hide(e),t.requiresArg&&this.requiresArg(e)}return this}options(e,t){return this.option(e,t)}parse(e,t,n){ot("[string|array] [function|boolean|object] [function]",[e,t,n],arguments.length),this[bn](),void 0===e&&(e=dn(this,tn,"f")),"object"==typeof t&&(fn(this,Zt,t,"f"),t=n),"function"==typeof t&&(fn(this,Jt,t,"f"),t=!1),t||fn(this,tn,e,"f"),dn(this,Jt,"f")&&fn(this,$t,!1,"f");const r=this[Vn](e,!!t),i=this.parsed;return dn(this,Tt,"f").setParsed(this.parsed),rt(r)?r.then((e=>(dn(this,Jt,"f")&&dn(this,Jt,"f").call(this,dn(this,Rt,"f"),e,dn(this,Ht,"f")),e))).catch((e=>{throw dn(this,Jt,"f")&&dn(this,Jt,"f")(e,this.parsed.argv,dn(this,Ht,"f")),e})).finally((()=>{this[Mn](),this.parsed=i})):(dn(this,Jt,"f")&&dn(this,Jt,"f").call(this,dn(this,Rt,"f"),r,dn(this,Ht,"f")),this[Mn](),this.parsed=i,r)}parseAsync(e,t,n){const r=this.parse(e,t,n);return rt(r)?r:Promise.resolve(r)}parseSync(e,t,n){const r=this.parse(e,t,n);if(rt(r))throw new Ke(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return r}parserConfiguration(e){return ot("<object>",[e],arguments.length),fn(this,Qt,e,"f"),this}pkgConf(e,t){ot("<string> [string]",[e,t],arguments.length);let n=null;const r=this[kn](t||dn(this,Dt,"f"));return r[e]&&"object"==typeof r[e]&&(n=Ct(r[e],t||dn(this,Dt,"f"),this[wn]()["deep-merge-config"]||!1,dn(this,rn,"f")),dn(this,Gt,"f").configObjects=(dn(this,Gt,"f").configObjects||[]).concat(n)),this}positional(e,t){ot("<string> <object>",[e,t],arguments.length);const n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];t=mt(t,((e,t)=>!("type"===e&&!["string","number","boolean"].includes(t))&&n.includes(e)));const r=dn(this,Mt,"f").fullCommands[dn(this,Mt,"f").fullCommands.length-1],i=r?dn(this,Pt,"f").cmdToParseOptions(r):{array:[],alias:{},default:{},demand:{}};return nt(i).forEach((n=>{const r=i[n];Array.isArray(r)?-1!==r.indexOf(e)&&(t[n]=!0):r[e]&&!(n in t)&&(t[n]=r[e])})),this.group(e,dn(this,cn,"f").getPositionalGroupName()),this.option(e,t)}recommendCommands(e=!0){return ot("[boolean]",[e],arguments.length),fn(this,nn,e,"f"),this}required(e,t,n){return this.demand(e,t,n)}require(e,t,n){return this.demand(e,t,n)}requiresArg(e){return ot("<array|string|object> [number]",[e],arguments.length),"string"==typeof e&&dn(this,Gt,"f").narg[e]||this[_n](this.requiresArg.bind(this),"narg",e,NaN),this}showCompletionScript(e,t){return ot("[string] [string]",[e,t],arguments.length),e=e||this.$0,dn(this,Vt,"f").log(dn(this,Tt,"f").generateCompletionScript(e,t||dn(this,It,"f")||"completion")),this}showHelp(e){if(ot("[string|function]",[e],arguments.length),fn(this,zt,!0,"f"),!dn(this,cn,"f").hasCachedHelpMessage()){if(!this.parsed){const t=this[Vn](dn(this,tn,"f"),void 0,void 0,0,!0);if(rt(t))return t.then((()=>{dn(this,cn,"f").showHelp(e)})),this}const t=dn(this,Pt,"f").runDefaultBuilderOn(this);if(rt(t))return t.then((()=>{dn(this,cn,"f").showHelp(e)})),this}return dn(this,cn,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,t){return ot("[boolean|string] [string]",[e,t],arguments.length),dn(this,cn,"f").showHelpOnFail(e,t),this}showVersion(e){return ot("[string|function]",[e],arguments.length),dn(this,cn,"f").showVersion(e),this}skipValidation(e){return ot("<array|string>",[e],arguments.length),this[jn]("skipValidation",e),this}strict(e){return ot("[boolean]",[e],arguments.length),fn(this,sn,!1!==e,"f"),this}strictCommands(e){return ot("[boolean]",[e],arguments.length),fn(this,on,!1!==e,"f"),this}strictOptions(e){return ot("[boolean]",[e],arguments.length),fn(this,an,!1!==e,"f"),this}string(e){return ot("<array|string>",[e],arguments.length),this[jn]("string",e),this[Yn](e),this}terminalWidth(){return ot([],0),dn(this,rn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return ot("<object>",[e],arguments.length),fn(this,Bt,!1,"f"),dn(this,rn,"f").y18n.updateLocale(e),this}usage(e,t,n,r){if(ot("<string|null|undefined> [string|boolean] [function|object] [function]",[e,t,n,r],arguments.length),void 0!==t){if(et(e,null,dn(this,rn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,t,n,r);throw new Ke(".usage() description must start with $0 if being used as alias for .command()")}return dn(this,cn,"f").usage(e),this}usageConfiguration(e){return ot("<object>",[e],arguments.length),fn(this,ln,e,"f"),this}version(e,t,n){const r="version";if(ot("[boolean|string] [string] [string]",[e,t,n],arguments.length),dn(this,hn,"f")&&(this[mn](dn(this,hn,"f")),dn(this,cn,"f").version(void 0),fn(this,hn,null,"f")),0===arguments.length)n=this[xn](),e=r;else if(1===arguments.length){if(!1===e)return this;n=e,e=r}else 2===arguments.length&&(n=t,t=void 0);return fn(this,hn,"string"==typeof e?e:r,"f"),t=t||dn(this,cn,"f").deferY18nLookup("Show version number"),dn(this,cn,"f").version(n||void 0),this.boolean(dn(this,hn,"f")),this.describe(dn(this,hn,"f"),t),this}wrap(e){return ot("<number|null|undefined>",[e],arguments.length),dn(this,cn,"f").wrap(e),this}[(Pt=new WeakMap,Dt=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,It=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,$t=new WeakMap,Ut=new WeakMap,Ft=new WeakMap,qt=new WeakMap,zt=new WeakMap,Wt=new WeakMap,Kt=new WeakMap,Vt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,on=new WeakMap,an=new WeakMap,cn=new WeakMap,ln=new WeakMap,hn=new WeakMap,un=new WeakMap,pn)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch(e){}return e}[gn](){return{log:(...e)=>{this[Fn]()||console.log(...e),fn(this,zt,!0,"f"),dn(this,Ht,"f").length&&fn(this,Ht,dn(this,Ht,"f")+"\n","f"),fn(this,Ht,dn(this,Ht,"f")+e.join(" "),"f")},error:(...e)=>{this[Fn]()||console.error(...e),fn(this,zt,!0,"f"),dn(this,Ht,"f").length&&fn(this,Ht,dn(this,Ht,"f")+"\n","f"),fn(this,Ht,dn(this,Ht,"f")+e.join(" "),"f")}}}[mn](e){nt(dn(this,Gt,"f")).forEach((t=>{if("configObjects"===t)return;const n=dn(this,Gt,"f")[t];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):"object"==typeof n&&delete n[e]})),delete dn(this,cn,"f").getDescriptions()[e]}[yn](e,t,n){dn(this,Nt,"f")[n]||(dn(this,rn,"f").process.emitWarning(e,t),dn(this,Nt,"f")[n]=!0)}[bn](){dn(this,Ut,"f").push({options:dn(this,Gt,"f"),configObjects:dn(this,Gt,"f").configObjects.slice(0),exitProcess:dn(this,$t,"f"),groups:dn(this,qt,"f"),strict:dn(this,sn,"f"),strictCommands:dn(this,on,"f"),strictOptions:dn(this,an,"f"),completionCommand:dn(this,It,"f"),output:dn(this,Ht,"f"),exitError:dn(this,Rt,"f"),hasOutput:dn(this,zt,"f"),parsed:this.parsed,parseFn:dn(this,Jt,"f"),parseContext:dn(this,Zt,"f")}),dn(this,cn,"f").freeze(),dn(this,un,"f").freeze(),dn(this,Pt,"f").freeze(),dn(this,Ft,"f").freeze()}[vn](){let e,t="";return e=/\b(node|iojs|electron)(\.exe)?$/.test(dn(this,rn,"f").process.argv()[0])?dn(this,rn,"f").process.argv().slice(1,2):dn(this,rn,"f").process.argv().slice(0,1),t=e.map((e=>{const t=this[Wn](dn(this,Dt,"f"),e);return e.match(/^(\/|([a-zA-Z]:)?\\)/)&&t.length<e.length?t:e})).join(" ").trim(),dn(this,rn,"f").getEnv("_")&&dn(this,rn,"f").getProcessArgvBin()===dn(this,rn,"f").getEnv("_")&&(t=dn(this,rn,"f").getEnv("_").replace(`${dn(this,rn,"f").path.dirname(dn(this,rn,"f").process.execPath())}/`,"")),t}[wn](){return dn(this,Qt,"f")}[En](){return dn(this,ln,"f")}[On](){if(!dn(this,Bt,"f"))return;const e=dn(this,rn,"f").getEnv("LC_ALL")||dn(this,rn,"f").getEnv("LC_MESSAGES")||dn(this,rn,"f").getEnv("LANG")||dn(this,rn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[xn](){return this[kn]().version||"unknown"}[Sn](e){const t=e["--"]?e["--"]:e._;for(let e,n=0;void 0!==(e=t[n]);n++)dn(this,rn,"f").Parser.looksLikeNumber(e)&&Number.isSafeInteger(Math.floor(parseFloat(`${e}`)))&&(t[n]=Number(e));return e}[kn](e){const t=e||"*";if(dn(this,Xt,"f")[t])return dn(this,Xt,"f")[t];let n={};try{let t=e||dn(this,rn,"f").mainFilename;!e&&dn(this,rn,"f").path.extname(t)&&(t=dn(this,rn,"f").path.dirname(t));const r=dn(this,rn,"f").findUp(t,((e,t)=>t.includes("package.json")?"package.json":void 0));et(r,void 0,dn(this,rn,"f")),n=JSON.parse(dn(this,rn,"f").readFileSync(r,"utf8"))}catch(e){}return dn(this,Xt,"f")[t]=n||{},dn(this,Xt,"f")[t]}[jn](e,t){(t=[].concat(t)).forEach((t=>{t=this[Pn](t),dn(this,Gt,"f")[e].push(t)}))}[_n](e,t,n,r){this[An](e,t,n,r,((e,t,n)=>{dn(this,Gt,"f")[e][t]=n}))}[Cn](e,t,n,r){this[An](e,t,n,r,((e,t,n)=>{dn(this,Gt,"f")[e][t]=(dn(this,Gt,"f")[e][t]||[]).concat(n)}))}[An](e,t,n,r,i){if(Array.isArray(n))n.forEach((t=>{e(t,r)}));else if((e=>"object"==typeof e)(n))for(const t of nt(n))e(t,n[t]);else i(t,this[Pn](n),r)}[Pn](e){return"__proto__"===e?"___proto___":e}[Dn](e,t){return this[_n](this[Dn].bind(this),"key",e,t),this}[Mn](){var e,t,n,r,i,s,o,a,c,l,h,u;const f=dn(this,Ut,"f").pop();let d;et(f,void 0,dn(this,rn,"f")),e=this,t=this,n=this,r=this,i=this,s=this,o=this,a=this,c=this,l=this,h=this,u=this,({options:{set value(t){fn(e,Gt,t,"f")}}.value,configObjects:d,exitProcess:{set value(e){fn(t,$t,e,"f")}}.value,groups:{set value(e){fn(n,qt,e,"f")}}.value,output:{set value(e){fn(r,Ht,e,"f")}}.value,exitError:{set value(e){fn(i,Rt,e,"f")}}.value,hasOutput:{set value(e){fn(s,zt,e,"f")}}.value,parsed:this.parsed,strict:{set value(e){fn(o,sn,e,"f")}}.value,strictCommands:{set value(e){fn(a,on,e,"f")}}.value,strictOptions:{set value(e){fn(c,an,e,"f")}}.value,completionCommand:{set value(e){fn(l,It,e,"f")}}.value,parseFn:{set value(e){fn(h,Jt,e,"f")}}.value,parseContext:{set value(e){fn(u,Zt,e,"f")}}.value}=f),dn(this,Gt,"f").configObjects=d,dn(this,cn,"f").unfreeze(),dn(this,un,"f").unfreeze(),dn(this,Pt,"f").unfreeze(),dn(this,Ft,"f").unfreeze()}[Tn](e,t){return ut(t,(t=>(e(t),t)))}getInternalMethods(){return{getCommandInstance:this[In].bind(this),getContext:this[Ln].bind(this),getHasOutput:this[Rn].bind(this),getLoggerInstance:this[Bn].bind(this),getParseContext:this[Nn].bind(this),getParserConfiguration:this[wn].bind(this),getUsageConfiguration:this[En].bind(this),getUsageInstance:this[$n].bind(this),getValidationInstance:this[Un].bind(this),hasParseCallback:this[Fn].bind(this),isGlobalContext:this[qn].bind(this),postProcess:this[zn].bind(this),reset:this[Kn].bind(this),runValidation:this[Hn].bind(this),runYargsParserAndExecuteCommands:this[Vn].bind(this),setHasOutput:this[Gn].bind(this)}}[In](){return dn(this,Pt,"f")}[Ln](){return dn(this,Mt,"f")}[Rn](){return dn(this,zt,"f")}[Bn](){return dn(this,Vt,"f")}[Nn](){return dn(this,Zt,"f")||{}}[$n](){return dn(this,cn,"f")}[Un](){return dn(this,un,"f")}[Fn](){return!!dn(this,Jt,"f")}[qn](){return dn(this,Kt,"f")}[zn](e,t,n,r){if(n)return e;if(rt(e))return e;t||(e=this[pn](e));return(this[wn]()["parse-positional-numbers"]||void 0===this[wn]()["parse-positional-numbers"])&&(e=this[Sn](e)),r&&(e=ht(e,this,dn(this,Ft,"f").getMiddleware(),!1)),e}[Kn](e={}){fn(this,Gt,dn(this,Gt,"f")||{},"f");const t={};t.local=dn(this,Gt,"f").local||[],t.configObjects=dn(this,Gt,"f").configObjects||[];const n={};t.local.forEach((t=>{n[t]=!0,(e[t]||[]).forEach((e=>{n[e]=!0}))})),Object.assign(dn(this,en,"f"),Object.keys(dn(this,qt,"f")).reduce(((e,t)=>{const r=dn(this,qt,"f")[t].filter((e=>!(e in n)));return r.length>0&&(e[t]=r),e}),{})),fn(this,qt,{},"f");return["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"].forEach((e=>{t[e]=(dn(this,Gt,"f")[e]||[]).filter((e=>!n[e]))})),["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"].forEach((e=>{t[e]=mt(dn(this,Gt,"f")[e],(e=>!n[e]))})),t.envPrefix=dn(this,Gt,"f").envPrefix,fn(this,Gt,t,"f"),fn(this,cn,dn(this,cn,"f")?dn(this,cn,"f").reset(n):vt(this,dn(this,rn,"f")),"f"),fn(this,un,dn(this,un,"f")?dn(this,un,"f").reset(n):function(e,t,n){const r=n.y18n.__,i=n.y18n.__n,s={nonOptionCount:function(n){const r=e.getDemandedCommands(),s=n._.length+(n["--"]?n["--"].length:0)-e.getInternalMethods().getContext().commands.length;r._&&(s<r._.min||s>r._.max)&&(s<r._.min?void 0!==r._.minMsg?t.fail(r._.minMsg?r._.minMsg.replace(/\$0/g,s.toString()).replace(/\$1/,r._.min.toString()):null):t.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",s,s.toString(),r._.min.toString())):s>r._.max&&(void 0!==r._.maxMsg?t.fail(r._.maxMsg?r._.maxMsg.replace(/\$0/g,s.toString()).replace(/\$1/,r._.max.toString()):null):t.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",s,s.toString(),r._.max.toString()))))},positionalCount:function(e,n){n<e&&t.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",n,n+"",e+""))},requiredArguments:function(e,n){let r=null;for(const t of Object.keys(n))Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]||(r=r||{},r[t]=n[t]);if(r){const e=[];for(const t of Object.keys(r)){const n=r[t];n&&e.indexOf(n)<0&&e.push(n)}const n=e.length?`\n${e.join("\n")}`:"";t.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(r).length,Object.keys(r).join(", ")+n))}},unknownArguments:function(n,r,o,a,c=!0){var l;const h=e.getInternalMethods().getCommandInstance().getCommands(),u=[],f=e.getInternalMethods().getContext();if(Object.keys(n).forEach((t=>{kt.includes(t)||Object.prototype.hasOwnProperty.call(o,t)||Object.prototype.hasOwnProperty.call(e.getInternalMethods().getParseContext(),t)||s.isValidAndSomeAliasIsNotNew(t,r)||u.push(t)})),c&&(f.commands.length>0||h.length>0||a)&&n._.slice(f.commands.length).forEach((e=>{h.includes(""+e)||u.push(""+e)})),c){const t=(null===(l=e.getDemandedCommands()._)||void 0===l?void 0:l.max)||0,r=f.commands.length+t;r<n._.length&&n._.slice(r).forEach((e=>{e=String(e),f.commands.includes(e)||u.includes(e)||u.push(e)}))}u.length&&t.fail(i("Unknown argument: %s","Unknown arguments: %s",u.length,u.map((e=>e.trim()?e:`"${e}"`)).join(", ")))},unknownCommands:function(n){const r=e.getInternalMethods().getCommandInstance().getCommands(),s=[],o=e.getInternalMethods().getContext();return(o.commands.length>0||r.length>0)&&n._.slice(o.commands.length).forEach((e=>{r.includes(""+e)||s.push(""+e)})),s.length>0&&(t.fail(i("Unknown command: %s","Unknown commands: %s",s.length,s.join(", "))),!0)},isValidAndSomeAliasIsNotNew:function(t,n){if(!Object.prototype.hasOwnProperty.call(n,t))return!1;const r=e.parsed.newAliases;return[t,...n[t]].some((e=>!Object.prototype.hasOwnProperty.call(r,e)||!r[t]))},limitedChoices:function(n){const i=e.getOptions(),s={};if(!Object.keys(i.choices).length)return;Object.keys(n).forEach((e=>{-1===kt.indexOf(e)&&Object.prototype.hasOwnProperty.call(i.choices,e)&&[].concat(n[e]).forEach((t=>{-1===i.choices[e].indexOf(t)&&void 0!==t&&(s[e]=(s[e]||[]).concat(t))}))}));const o=Object.keys(s);if(!o.length)return;let a=r("Invalid values:");o.forEach((e=>{a+=`\n  ${r("Argument: %s, Given: %s, Choices: %s",e,t.stringifiedValues(s[e]),t.stringifiedValues(i.choices[e]))}`})),t.fail(a)}};let o={};function a(e,t){const n=Number(t);return"number"==typeof(t=isNaN(n)?t:n)?t=e._.length>=t:t.match(/^--no-.+/)?(t=t.match(/^--no-(.+)/)[1],t=!Object.prototype.hasOwnProperty.call(e,t)):t=Object.prototype.hasOwnProperty.call(e,t),t}s.implies=function(t,r){ot("<string|object> [array|number|string]",[t,r],arguments.length),"object"==typeof t?Object.keys(t).forEach((e=>{s.implies(e,t[e])})):(e.global(t),o[t]||(o[t]=[]),Array.isArray(r)?r.forEach((e=>s.implies(t,e))):(et(r,void 0,n),o[t].push(r)))},s.getImplied=function(){return o},s.implications=function(e){const n=[];if(Object.keys(o).forEach((t=>{const r=t;(o[t]||[]).forEach((t=>{let i=r;const s=t;i=a(e,i),t=a(e,t),i&&!t&&n.push(` ${r} -> ${s}`)}))})),n.length){let e=`${r("Implications failed:")}\n`;n.forEach((t=>{e+=t})),t.fail(e)}};let c={};s.conflicts=function(t,n){ot("<string|object> [array|string]",[t,n],arguments.length),"object"==typeof t?Object.keys(t).forEach((e=>{s.conflicts(e,t[e])})):(e.global(t),c[t]||(c[t]=[]),Array.isArray(n)?n.forEach((e=>s.conflicts(t,e))):c[t].push(n))},s.getConflicting=()=>c,s.conflicting=function(i){Object.keys(i).forEach((e=>{c[e]&&c[e].forEach((n=>{n&&void 0!==i[e]&&void 0!==i[n]&&t.fail(r("Arguments %s and %s are mutually exclusive",e,n))}))})),e.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach((e=>{c[e].forEach((s=>{s&&void 0!==i[n.Parser.camelCase(e)]&&void 0!==i[n.Parser.camelCase(s)]&&t.fail(r("Arguments %s and %s are mutually exclusive",e,s))}))}))},s.recommendCommands=function(e,n){n=n.sort(((e,t)=>t.length-e.length));let i=null,s=1/0;for(let t,r=0;void 0!==(t=n[r]);r++){const n=St(e,t);n<=3&&n<s&&(s=n,i=t)}i&&t.fail(r("Did you mean %s?",i))},s.reset=function(e){return o=mt(o,(t=>!e[t])),c=mt(c,(t=>!e[t])),s};const l=[];return s.freeze=function(){l.push({implied:o,conflicting:c})},s.unfreeze=function(){const e=l.pop();et(e,void 0,n),({implied:o,conflicting:c}=e)},s}(this,dn(this,cn,"f"),dn(this,rn,"f")),"f"),fn(this,Pt,dn(this,Pt,"f")?dn(this,Pt,"f").reset():function(e,t,n,r){return new dt(e,t,n,r)}(dn(this,cn,"f"),dn(this,un,"f"),dn(this,Ft,"f"),dn(this,rn,"f")),"f"),dn(this,Tt,"f")||fn(this,Tt,function(e,t,n,r){return new xt(e,t,n,r)}(this,dn(this,cn,"f"),dn(this,Pt,"f"),dn(this,rn,"f")),"f"),dn(this,Ft,"f").reset(),fn(this,It,null,"f"),fn(this,Ht,"","f"),fn(this,Rt,null,"f"),fn(this,zt,!1,"f"),this.parsed=!1,this}[Wn](e,t){return dn(this,rn,"f").path.relative(e,t)}[Vn](e,t,n,r=0,i=!1){let s=!!n||i;e=e||dn(this,tn,"f"),dn(this,Gt,"f").__=dn(this,rn,"f").y18n.__,dn(this,Gt,"f").configuration=this[wn]();const o=!!dn(this,Gt,"f").configuration["populate--"],a=Object.assign({},dn(this,Gt,"f").configuration,{"populate--":!0}),c=dn(this,rn,"f").Parser.detailed(e,Object.assign({},dn(this,Gt,"f"),{configuration:{"parse-positional-numbers":!1,...a}})),l=Object.assign(c.argv,dn(this,Zt,"f"));let h;const u=c.aliases;let f=!1,d=!1;Object.keys(l).forEach((e=>{e===dn(this,Wt,"f")&&l[e]?f=!0:e===dn(this,hn,"f")&&l[e]&&(d=!0)})),l.$0=this.$0,this.parsed=c,0===r&&dn(this,cn,"f").clearCachedHelpMessage();try{if(this[On](),t)return this[zn](l,o,!!n,!1);if(dn(this,Wt,"f")){[dn(this,Wt,"f")].concat(u[dn(this,Wt,"f")]||[]).filter((e=>e.length>1)).includes(""+l._[l._.length-1])&&(l._.pop(),f=!0)}fn(this,Kt,!1,"f");const a=dn(this,Pt,"f").getCommands(),p=dn(this,Tt,"f").completionKey in l,g=f||p||i;if(l._.length){if(a.length){let e;for(let t,s=r||0;void 0!==l._[s];s++){if(t=String(l._[s]),a.includes(t)&&t!==dn(this,It,"f")){const e=dn(this,Pt,"f").runCommand(t,this,c,s+1,i,f||d||i);return this[zn](e,o,!!n,!1)}if(!e&&t!==dn(this,It,"f")){e=t;break}}!dn(this,Pt,"f").hasDefaultCommand()&&dn(this,nn,"f")&&e&&!g&&dn(this,un,"f").recommendCommands(e,a)}dn(this,It,"f")&&l._.includes(dn(this,It,"f"))&&!p&&(dn(this,$t,"f")&&yt(!0),this.showCompletionScript(),this.exit(0))}if(dn(this,Pt,"f").hasDefaultCommand()&&!g){const e=dn(this,Pt,"f").runCommand(null,this,c,0,i,f||d||i);return this[zn](e,o,!!n,!1)}if(p){dn(this,$t,"f")&&yt(!0);const t=(e=[].concat(e)).slice(e.indexOf(`--${dn(this,Tt,"f").completionKey}`)+1);return dn(this,Tt,"f").getCompletion(t,((e,t)=>{if(e)throw new Ke(e.message);(t||[]).forEach((e=>{dn(this,Vt,"f").log(e)})),this.exit(0)})),this[zn](l,!o,!!n,!1)}if(dn(this,zt,"f")||(f?(dn(this,$t,"f")&&yt(!0),s=!0,this.showHelp("log"),this.exit(0)):d&&(dn(this,$t,"f")&&yt(!0),s=!0,dn(this,cn,"f").showVersion("log"),this.exit(0))),!s&&dn(this,Gt,"f").skipValidation.length>0&&(s=Object.keys(l).some((e=>dn(this,Gt,"f").skipValidation.indexOf(e)>=0&&!0===l[e]))),!s){if(c.error)throw new Ke(c.error.message);if(!p){const e=this[Hn](u,{},c.error);n||(h=ht(l,this,dn(this,Ft,"f").getMiddleware(),!0)),h=this[Tn](e,null!=h?h:l),rt(h)&&!n&&(h=h.then((()=>ht(l,this,dn(this,Ft,"f").getMiddleware(),!1))))}}}catch(e){if(!(e instanceof Ke))throw e;dn(this,cn,"f").fail(e.message,e)}return this[zn](null!=h?h:l,o,!!n,!0)}[Hn](e,t,n,r){const i={...this.getDemandedOptions()};return s=>{if(n)throw new Ke(n.message);dn(this,un,"f").nonOptionCount(s),dn(this,un,"f").requiredArguments(s,i);let o=!1;dn(this,on,"f")&&(o=dn(this,un,"f").unknownCommands(s)),dn(this,sn,"f")&&!o?dn(this,un,"f").unknownArguments(s,e,t,!!r):dn(this,an,"f")&&dn(this,un,"f").unknownArguments(s,e,{},!1,!1),dn(this,un,"f").limitedChoices(s),dn(this,un,"f").implications(s),dn(this,un,"f").conflicting(s)}}[Gn](){fn(this,zt,!0,"f")}[Yn](e){if("string"==typeof e)dn(this,Gt,"f").key[e]=!0;else for(const t of e)dn(this,Gt,"f").key[t]=!0}}const Jn=(Zn=Xe,(e=[],t=Zn.process.cwd(),n)=>{const r=new Qn(e,t,n,Zn);return Object.defineProperty(r,"argv",{get:()=>r.parse(),enumerable:!0}),r.help(),r.version(),r});var Zn;function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function er(e){var t=function(e,t){if("object"!==Xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xn(t)?t:String(t)}function tr(e,t,n){return(t=er(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){nr(s,r,i,o,a,"next",e)}function a(e){nr(s,r,i,o,a,"throw",e)}o(void 0)}))}}const{platform:ir}=e,sr={square:"█",squareDarkShade:"▓",squareMediumShade:"▒",squareLightShade:"░",squareTop:"▀",squareBottom:"▄",squareLeft:"▌",squareRight:"▐",squareCenter:"■",bullet:"●",dot:"․",ellipsis:"…",pointerSmall:"›",triangleUp:"▲",triangleUpSmall:"▴",triangleDown:"▼",triangleDownSmall:"▾",triangleLeftSmall:"◂",triangleRightSmall:"▸",home:"⌂",heart:"♥",musicNote:"♪",musicNoteBeamed:"♫",arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",arrowLeftRight:"↔",arrowUpDown:"↕",almostEqual:"≈",notEqual:"≠",lessOrEqual:"≤",greaterOrEqual:"≥",identical:"≡",infinity:"∞",subscriptZero:"₀",subscriptOne:"₁",subscriptTwo:"₂",subscriptThree:"₃",subscriptFour:"₄",subscriptFive:"₅",subscriptSix:"₆",subscriptSeven:"₇",subscriptEight:"₈",subscriptNine:"₉",oneHalf:"½",oneThird:"⅓",oneQuarter:"¼",oneFifth:"⅕",oneSixth:"⅙",oneEighth:"⅛",twoThirds:"⅔",twoFifths:"⅖",threeQuarters:"¾",threeFifths:"⅗",threeEighths:"⅜",fourFifths:"⅘",fiveSixths:"⅚",fiveEighths:"⅝",sevenEighths:"⅞",line:"─",lineBold:"━",lineDouble:"═",lineDashed0:"┄",lineDashed1:"┅",lineDashed2:"┈",lineDashed3:"┉",lineDashed4:"╌",lineDashed5:"╍",lineDashed6:"╴",lineDashed7:"╶",lineDashed8:"╸",lineDashed9:"╺",lineDashed10:"╼",lineDashed11:"╾",lineDashed12:"−",lineDashed13:"–",lineDashed14:"‐",lineDashed15:"⁃",lineVertical:"│",lineVerticalBold:"┃",lineVerticalDouble:"║",lineVerticalDashed0:"┆",lineVerticalDashed1:"┇",lineVerticalDashed2:"┊",lineVerticalDashed3:"┋",lineVerticalDashed4:"╎",lineVerticalDashed5:"╏",lineVerticalDashed6:"╵",lineVerticalDashed7:"╷",lineVerticalDashed8:"╹",lineVerticalDashed9:"╻",lineVerticalDashed10:"╽",lineVerticalDashed11:"╿",lineDownLeft:"┐",lineDownLeftArc:"╮",lineDownBoldLeftBold:"┓",lineDownBoldLeft:"┒",lineDownLeftBold:"┑",lineDownDoubleLeftDouble:"╗",lineDownDoubleLeft:"╖",lineDownLeftDouble:"╕",lineDownRight:"┌",lineDownRightArc:"╭",lineDownBoldRightBold:"┏",lineDownBoldRight:"┎",lineDownRightBold:"┍",lineDownDoubleRightDouble:"╔",lineDownDoubleRight:"╓",lineDownRightDouble:"╒",lineUpLeft:"┘",lineUpLeftArc:"╯",lineUpBoldLeftBold:"┛",lineUpBoldLeft:"┚",lineUpLeftBold:"┙",lineUpDoubleLeftDouble:"╝",lineUpDoubleLeft:"╜",lineUpLeftDouble:"╛",lineUpRight:"└",lineUpRightArc:"╰",lineUpBoldRightBold:"┗",lineUpBoldRight:"┖",lineUpRightBold:"┕",lineUpDoubleRightDouble:"╚",lineUpDoubleRight:"╙",lineUpRightDouble:"╘",lineUpDownLeft:"┤",lineUpBoldDownBoldLeftBold:"┫",lineUpBoldDownBoldLeft:"┨",lineUpDownLeftBold:"┥",lineUpBoldDownLeftBold:"┩",lineUpDownBoldLeftBold:"┪",lineUpDownBoldLeft:"┧",lineUpBoldDownLeft:"┦",lineUpDoubleDownDoubleLeftDouble:"╣",lineUpDoubleDownDoubleLeft:"╢",lineUpDownLeftDouble:"╡",lineUpDownRight:"├",lineUpBoldDownBoldRightBold:"┣",lineUpBoldDownBoldRight:"┠",lineUpDownRightBold:"┝",lineUpBoldDownRightBold:"┡",lineUpDownBoldRightBold:"┢",lineUpDownBoldRight:"┟",lineUpBoldDownRight:"┞",lineUpDoubleDownDoubleRightDouble:"╠",lineUpDoubleDownDoubleRight:"╟",lineUpDownRightDouble:"╞",lineDownLeftRight:"┬",lineDownBoldLeftBoldRightBold:"┳",lineDownLeftBoldRightBold:"┯",lineDownBoldLeftRight:"┰",lineDownBoldLeftBoldRight:"┱",lineDownBoldLeftRightBold:"┲",lineDownLeftRightBold:"┮",lineDownLeftBoldRight:"┭",lineDownDoubleLeftDoubleRightDouble:"╦",lineDownDoubleLeftRight:"╥",lineDownLeftDoubleRightDouble:"╤",lineUpLeftRight:"┴",lineUpBoldLeftBoldRightBold:"┻",lineUpLeftBoldRightBold:"┷",lineUpBoldLeftRight:"┸",lineUpBoldLeftBoldRight:"┹",lineUpBoldLeftRightBold:"┺",lineUpLeftRightBold:"┶",lineUpLeftBoldRight:"┵",lineUpDoubleLeftDoubleRightDouble:"╩",lineUpDoubleLeftRight:"╨",lineUpLeftDoubleRightDouble:"╧",lineUpDownLeftRight:"┼",lineUpBoldDownBoldLeftBoldRightBold:"╋",lineUpDownBoldLeftBoldRightBold:"╈",lineUpBoldDownLeftBoldRightBold:"╇",lineUpBoldDownBoldLeftRightBold:"╊",lineUpBoldDownBoldLeftBoldRight:"╉",lineUpBoldDownLeftRight:"╀",lineUpDownBoldLeftRight:"╁",lineUpDownLeftBoldRight:"┽",lineUpDownLeftRightBold:"┾",lineUpBoldDownBoldLeftRight:"╂",lineUpDownLeftBoldRightBold:"┿",lineUpBoldDownLeftBoldRight:"╃",lineUpBoldDownLeftRightBold:"╄",lineUpDownBoldLeftBoldRight:"╅",lineUpDownBoldLeftRightBold:"╆",lineUpDoubleDownDoubleLeftDoubleRightDouble:"╬",lineUpDoubleDownDoubleLeftRight:"╫",lineUpDownLeftDoubleRightDouble:"╪",lineCross:"╳",lineBackslash:"╲",lineSlash:"╱"},or={...sr,..."linux"===ir?{circleQuestionMark:"?⃝",questionMarkPrefix:"?⃝"}:{circleQuestionMark:"?",questionMarkPrefix:"?"},tick:"✔",info:"ℹ",warning:"⚠",cross:"✘",squareSmall:"◻",squareSmallFilled:"◼",circle:"◯",circleFilled:"◉",circleDotted:"◌",circleDouble:"◎",circleCircle:"ⓞ",circleCross:"ⓧ",circlePipe:"Ⓘ",radioOn:"◉",radioOff:"◯",checkboxOn:"☒",checkboxOff:"☐",checkboxCircleOn:"ⓧ",checkboxCircleOff:"Ⓘ",pointer:"❯",triangleUpOutline:"△",triangleLeft:"◀",triangleRight:"▶",lozenge:"◆",lozengeOutline:"◇",hamburger:"☰",smiley:"㋡",mustache:"෴",star:"★",play:"▶",nodejs:"⬢",oneSeventh:"⅐",oneNinth:"⅑",oneTenth:"⅒"},ar={...sr,tick:"√",info:"i",warning:"‼",cross:"×",squareSmall:"□",squareSmallFilled:"■",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(○)",circleCross:"(×)",circlePipe:"(│)",circleQuestionMark:"(?)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[×]",checkboxOff:"[ ]",checkboxCircleOn:"(×)",checkboxCircleOff:"( )",questionMarkPrefix:"？",pointer:">",triangleUpOutline:"∆",triangleLeft:"◄",triangleRight:"►",lozenge:"♦",lozengeOutline:"◊",hamburger:"≡",smiley:"☺",mustache:"┌─┐",star:"✶",play:"►",nodejs:"♦",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},cr=ge()?or:ar;var lr=function(e,t){return lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},lr(e,t)};function hr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}lr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ur(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function fr(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function dr(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function gr(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function mr(e){return this instanceof mr?(this.v=e,this):new mr(e)}function yr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof mr?Promise.resolve(n.value.v).then(c,l):h(s[0][2],n)}catch(e){h(s[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function br(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=dr(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function vr(e){return"function"==typeof e}function wr(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Er=wr((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Or(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var xr=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=dr(s),a=o.next();!a.done;a=o.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(vr(c))try{c()}catch(e){i=e instanceof Er?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var h=dr(l),u=h.next();!u.done;u=h.next()){var f=u.value;try{jr(f)}catch(e){i=null!=i?i:[],e instanceof Er?i=gr(gr([],pr(i)),pr(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}if(i)throw new Er(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)jr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Or(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Or(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Sr=xr.EMPTY;function kr(e){return e instanceof xr||e&&"closed"in e&&vr(e.remove)&&vr(e.add)&&vr(e.unsubscribe)}function jr(e){vr(e)?e():e.unsubscribe()}var _r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cr={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Cr.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,gr([e,t],pr(n))):setTimeout.apply(void 0,gr([e,t],pr(n)))},clearTimeout:function(e){var t=Cr.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ar(e){Cr.setTimeout((function(){throw e}))}function Pr(){}function Dr(e){e()}var Mr=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,kr(t)&&t.add(n)):n.destination=Nr,n}return hr(t,e),t.create=function(e,t,n){return new Rr(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(xr),Tr=Function.prototype.bind;function Ir(e,t){return Tr.call(e,t)}var Lr=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Br(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Br(e)}else Br(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Br(e)}},e}(),Rr=function(e){function t(t,n,r){var i,s,o=e.call(this)||this;vr(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:o&&_r.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&Ir(t.next,s),error:t.error&&Ir(t.error,s),complete:t.complete&&Ir(t.complete,s)}):i=t;return o.destination=new Lr(i),o}return hr(t,e),t}(Mr);function Br(e){Ar(e)}var Nr={closed:!0,next:Pr,error:function(e){throw e},complete:Pr},$r="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ur(e){return e}var Fr=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,s=(r=e)&&r instanceof Mr||function(e){return e&&vr(e.next)&&vr(e.error)&&vr(e.complete)}(r)&&kr(r)?e:new Rr(e,t,n);return Dr((function(){var e=i,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?i._subscribe(s):i._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=qr(t))((function(t,r){var i=new Rr({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[$r]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?Ur:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=qr(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function qr(e){var t;return null!==(t=null!=e?e:_r.Promise)&&void 0!==t?t:Promise}function zr(e){return vr(null==e?void 0:e.lift)}function Wr(e){return function(t){if(zr(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Kr(e,t,n,r,i){return new Vr(e,t,n,r,i)}var Vr=function(e){function t(t,n,r,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return hr(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Mr);var Hr=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,zr(t)&&(r.lift=t.lift),r}return hr(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new xr;var n=this.getSubject();t.add(this.source.subscribe(Kr(n,void 0,(function(){e._teardown(),n.complete()}),(function(t){e._teardown(),n.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=xr.EMPTY)}return t},t.prototype.refCount=function(){return Wr((function(e,t){var n=null;e._refCount++;var r=Kr(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));e.subscribe(r),r.closed||(n=e.connect())}))(this)},t}(Fr),Gr=wr((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Yr=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return hr(t,e),t.prototype.lift=function(e){var t=new Qr(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Gr},t.prototype.next=function(e){var t=this;Dr((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=dr(t.currentObservers),s=i.next();!s.done;s=i.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Dr((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Dr((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?Sr:(this.currentObservers=null,s.push(e),new xr((function(){t.currentObservers=null,Or(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new Fr;return e.source=this,e},t.create=function(e,t){return new Qr(e,t)},t}(Fr),Qr=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return hr(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Sr},t}(Yr),Jr=new Fr((function(e){return e.complete()}));function Zr(e){return e?function(e){return new Fr((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Jr}function Xr(e){return(t=(n=e)[n.length-1])&&vr(t.schedule)?e.pop():void 0;var t,n}var ei=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ti(e){return vr(null==e?void 0:e.then)}function ni(e){return vr(e[$r])}function ri(e){return Symbol.asyncIterator&&vr(null==e?void 0:e[Symbol.asyncIterator])}function ii(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var si="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function oi(e){return vr(null==e?void 0:e[si])}function ai(e){return yr(this,arguments,(function(){var t,n,r;return fr(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,mr(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,mr(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,mr(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ci(e){return vr(null==e?void 0:e.getReader)}function li(e){if(e instanceof Fr)return e;if(null!=e){if(ni(e))return function(e){return new Fr((function(t){var n=e[$r]();if(vr(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(ei(e))return r=e,new Fr((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(ti(e))return n=e,new Fr((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Ar)}));if(ri(e))return hi(e);if(oi(e))return t=e,new Fr((function(e){var n,r;try{for(var i=dr(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(ci(e))return hi(ai(e))}var t,n,r;throw ii(e)}function hi(e){return new Fr((function(t){(function(e,t){var n,r,i,s;return ur(this,void 0,void 0,(function(){var o,a;return fr(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=br(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ui(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var s=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(s),!i)return s}function fi(e,t){return void 0===t&&(t=0),Wr((function(n,r){n.subscribe(Kr(r,(function(n){return ui(r,e,(function(){return r.next(n)}),t)}),(function(){return ui(r,e,(function(){return r.complete()}),t)}),(function(n){return ui(r,e,(function(){return r.error(n)}),t)})))}))}function di(e,t){return void 0===t&&(t=0),Wr((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function pi(e,t){if(!e)throw new Error("Iterable cannot be null");return new Fr((function(n){ui(n,t,(function(){var r=e[Symbol.asyncIterator]();ui(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function gi(e,t){if(null!=e){if(ni(e))return function(e,t){return li(e).pipe(di(t),fi(t))}(e,t);if(ei(e))return function(e,t){return new Fr((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(ti(e))return function(e,t){return li(e).pipe(di(t),fi(t))}(e,t);if(ri(e))return pi(e,t);if(oi(e))return function(e,t){return new Fr((function(n){var r;return ui(n,t,(function(){r=e[si](),ui(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return vr(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(ci(e))return function(e,t){return pi(ai(e),t)}(e,t)}throw ii(e)}function mi(e,t){return t?gi(e,t):li(e)}function yi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mi(e,Xr(e))}function bi(e,t){return Wr((function(n,r){var i=0;n.subscribe(Kr(r,(function(n){r.next(e.call(t,n,i++))})))}))}var vi=Array.isArray;function wi(e){return bi((function(t){return function(e,t){return vi(t)?e.apply(void 0,gr([],pr(t))):e(t)}(e,t)}))}function Ei(e,t,n){return void 0===n&&(n=1/0),vr(t)?Ei((function(n,r){return bi((function(e,i){return t(n,e,r,i)}))(li(e(n,r)))}),n):("number"==typeof t&&(n=t),Wr((function(t,r){return function(e,t,n,r,i,s,o,a){var c=[],l=0,h=0,u=!1,f=function(){!u||c.length||l||t.complete()},d=function(e){return l<r?p(e):c.push(e)},p=function(e){s&&t.next(e),l++;var a=!1;li(n(e,h++)).subscribe(Kr(t,(function(e){null==i||i(e),s?d(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{l--;for(var e=function(){var e=c.shift();o?ui(t,o,(function(){return p(e)})):p(e)};c.length&&l<r;)e();f()}catch(e){t.error(e)}})))};return e.subscribe(Kr(t,d,(function(){u=!0,f()}))),function(){null==a||a()}}(t,r,e,n)})))}function Oi(e){return new Fr((function(t){li(e()).subscribe(t)}))}var xi=["addListener","removeListener"],Si=["addEventListener","removeEventListener"],ki=["on","off"];function ji(e,t,n,r){if(vr(n)&&(r=n,n=void 0),r)return ji(e,t,n).pipe(wi(r));var i=pr(function(e){return vr(e.addEventListener)&&vr(e.removeEventListener)}(e)?Si.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return vr(e.addListener)&&vr(e.removeListener)}(e)?xi.map(_i(e,t)):function(e){return vr(e.on)&&vr(e.off)}(e)?ki.map(_i(e,t)):[],2),s=i[0],o=i[1];if(!s&&ei(e))return Ei((function(e){return ji(e,t,n)}))(li(e));if(!s)throw new TypeError("Invalid event target");return new Fr((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return s(t),function(){return o(t)}}))}function _i(e,t){return function(n){return function(r){return e[n](t,r)}}}function Ci(e,t){return Wr((function(n,r){var i=0;n.subscribe(Kr(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}function Ai(e,t){return Wr(function(e,t,n,r,i){return function(s,o){var a=n,c=t,l=0;s.subscribe(Kr(o,(function(t){var n=l++;c=a?e(c,t,n):(a=!0,t),r&&o.next(c)}),i&&function(){a&&o.next(c),o.complete()}))}}(e,t,arguments.length>=2,!1,!0))}function Pi(e,t){return vr(t)?Ei(e,t,1):Ei(e,1)}var Di={connector:function(){return new Yr}};function Mi(e,t){void 0===t&&(t=Di);var n=t.connector;return Wr((function(t,r){var i,s=n();li(e((i=s,new Fr((function(e){return i.subscribe(e)}))))).subscribe(r),r.add(t.subscribe(s))}))}function Ti(e){return e<=0?function(){return Jr}:Wr((function(t,n){var r=0;t.subscribe(Kr(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}var Ii=Ei;function Li(e){return e?function(t){return Mi(e)(t)}:function(e){return function(e,t){var n=vr(e)?e:function(){return e};return vr(t)?Mi(t,{connector:n}):function(e){return new Hr(e,n)}}(new Yr)(e)}}function Ri(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new Yr}:t,r=e.resetOnError,i=void 0===r||r,s=e.resetOnComplete,o=void 0===s||s,a=e.resetOnRefCountZero,c=void 0===a||a;return function(e){var t,r,s,a=0,l=!1,h=!1,u=function(){null==r||r.unsubscribe(),r=void 0},f=function(){u(),t=s=void 0,l=h=!1},d=function(){var e=t;f(),null==e||e.unsubscribe()};return Wr((function(e,p){a++,h||l||u();var g=s=null!=s?s:n();p.add((function(){0!==--a||h||l||(r=Bi(d,c))})),g.subscribe(p),!t&&a>0&&(t=new Rr({next:function(e){return g.next(e)},error:function(e){h=!0,u(),r=Bi(f,i,e),g.error(e)},complete:function(){l=!0,u(),r=Bi(f,o),g.complete()}}),li(e).subscribe(t))}))(e)}}function Bi(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var i=new Rr({next:function(){i.unsubscribe(),e()}});return li(t.apply(void 0,gr([],pr(n)))).subscribe(i)}}else e()}function Ni(e){return Wr((function(t,n){li(e).subscribe(Kr(n,(function(){return n.complete()}),Pr)),!n.closed&&t.subscribe(n)}))}class $i{constructor(e){this.type="separator",this.line=oe.dim(e||new Array(15).join(cr.line))}static exclude(e){return"separator"!==e.type}toString(){return this.line}}class Ui{constructor(e,t){if(e instanceof Ui||"separator"===e.type)return e;"string"==typeof e||"number"==typeof e?(this.name=String(e),this.value=e,this.short=String(e)):Object.assign(this,e,{name:e.name||e.value,value:"value"in e?e.value:e.name,short:e.short||e.name||e.value}),"function"==typeof e.disabled?this.disabled=e.disabled(t):this.disabled=e.disabled}}class Fi{constructor(e,t){this.choices=e.map((e=>"separator"===e.type?(e instanceof $i||(e=new $i(e.line)),e):new Ui(e,t))),this.realChoices=this.choices.filter($i.exclude).filter((e=>!e.disabled)),Object.defineProperty(this,"length",{get(){return this.choices.length},set(e){this.choices.length=e}}),Object.defineProperty(this,"realLength",{get(){return this.realChoices.length},set(){throw new Error("Cannot set `realLength` of a Choices collection")}})}getChoice(e){return y("number"==typeof e),this.realChoices[e]}get(e){return y("number"==typeof e),this.choices[e]}where(e){return b.filter(this.realChoices,e)}pluck(e){return b.map(this.realChoices,e)}indexOf(...e){return this.choices.indexOf(...e)}forEach(...e){return this.choices.forEach(...e)}filter(...e){return this.choices.filter(...e)}reduce(...e){return this.choices.reduce(...e)}find(e){return this.choices.find(e)}push(...e){const t=e.map((e=>new Ui(e)));return this.choices.push(...t),this.realChoices=this.choices.filter($i.exclude).filter((e=>!e.disabled)),this.choices}}const qi="[",zi="]",Wi="",Ki=";",Vi="Apple_Terminal"===e.env.TERM_PROGRAM,Hi={cursorTo:(e,t)=>{if("number"!=typeof e)throw new TypeError("The `x` argument is required");return"number"!=typeof t?qi+(e+1)+"G":qi+(t+1)+Ki+(e+1)+"H"},cursorMove:(e,t)=>{if("number"!=typeof e)throw new TypeError("The `x` argument is required");let n="";return e<0?n+=qi+-e+"D":e>0&&(n+=qi+e+"C"),t<0?n+=qi+-t+"A":t>0&&(n+=qi+t+"B"),n},cursorUp:(e=1)=>qi+e+"A",cursorDown:(e=1)=>qi+e+"B",cursorForward:(e=1)=>qi+e+"C",cursorBackward:(e=1)=>qi+e+"D",cursorLeft:"[G"};Hi.cursorSavePosition=Vi?"7":"[s",Hi.cursorRestorePosition=Vi?"8":"[u",Hi.cursorGetPosition="[6n",Hi.cursorNextLine="[E",Hi.cursorPrevLine="[F",Hi.cursorHide="[?25l",Hi.cursorShow="[?25h",Hi.eraseLines=e=>{let t="";for(let n=0;n<e;n++)t+=Hi.eraseLine+(n<e-1?Hi.cursorUp():"");return e&&(t+=Hi.cursorLeft),t},Hi.eraseEndLine="[K",Hi.eraseStartLine="[1K",Hi.eraseLine="[2K",Hi.eraseDown="[J",Hi.eraseUp="[1J",Hi.eraseScreen="[2J",Hi.scrollUp="[S",Hi.scrollDown="[T",Hi.clearScreen="c",Hi.clearTerminal="win32"===e.platform?`${Hi.eraseScreen}${qi}0f`:`${Hi.eraseScreen}${qi}3J${qi}H`,Hi.beep=Wi,Hi.link=(e,t)=>[zi,"8",Ki,Ki,t,Wi,e,zi,"8",Ki,Ki,Wi].join(""),Hi.image=(e,t={})=>{let n=`${zi}1337;File=inline=1`;return t.width&&(n+=`;width=${t.width}`),t.height&&(n+=`;height=${t.height}`),!1===t.preserveAspectRatio&&(n+=";preserveAspectRatio=0"),n+":"+e.toString("base64")+Wi},Hi.iTerm={setCwd:(t=e.cwd())=>`${zi}50;CurrentDir=${t}${Wi}`,annotation(e,t={}){let n=`${zi}1337;`;const r=void 0!==t.x,i=void 0!==t.y;if((r||i)&&(!r||!i||void 0===t.length))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replace(/\|/g,""),n+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?n+=(r?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):n+=e,n+Wi}};const Gi=function(e,t){e.output.write(Hi.cursorBackward(t))},Yi=function(e,t){e.output.write(Hi.cursorDown(t))},Qi=function(e,t){e.output.write(Hi.eraseLines(t))};function Ji(e,t={}){if("string"!=typeof e||0===e.length)return 0;if(t={ambiguousIsNarrow:!0,...t},0===(e=pe(e)).length)return 0;e=e.replace(E(),"  ");const n=t.ambiguousIsNarrow?1:2;let r=0;for(const t of e){const e=t.codePointAt(0);if(e<=31||e>=127&&e<=159)continue;if(e>=768&&e<=879)continue;switch(w.eastAsianWidth(t)){case"F":case"W":r+=2;break;case"A":r+=n;break;default:r+=1}}return r}const Zi=10,Xi=(e=0)=>t=>`[${t+e}m`,es=(e=0)=>t=>`[${38+e};5;${t}m`,ts=(e=0)=>(t,n,r)=>`[${38+e};2;${t};${n};${r}m`,ns={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(ns.modifier);Object.keys(ns.color),Object.keys(ns.bgColor);const rs=function(){const e=new Map;for(const[t,n]of Object.entries(ns)){for(const[t,r]of Object.entries(n))ns[t]={open:`[${r[0]}m`,close:`[${r[1]}m`},n[t]=ns[t],e.set(r[0],r[1]);Object.defineProperty(ns,t,{value:n,enumerable:!1})}return Object.defineProperty(ns,"codes",{value:e,enumerable:!1}),ns.color.close="[39m",ns.bgColor.close="[49m",ns.color.ansi=Xi(),ns.color.ansi256=es(),ns.color.ansi16m=ts(),ns.bgColor.ansi=Xi(Zi),ns.bgColor.ansi256=es(Zi),ns.bgColor.ansi16m=ts(Zi),Object.defineProperties(ns,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;3===n.length&&(n=[...n].map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>ns.rgbToAnsi256(...ns.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value:e=>{if(e<8)return 30+e;if(e<16)return e-8+90;let t,n,r;if(e>=232)t=(10*(e-232)+8)/255,n=t,r=t;else{const i=(e-=16)%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}const i=2*Math.max(t,n,r);if(0===i)return 30;let s=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return 2===i&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>ns.ansi256ToAnsi(ns.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>ns.ansi256ToAnsi(ns.hexToAnsi256(e)),enumerable:!1}}),ns}(),is=new Set(["",""]),ss="]8;;",os=e=>`${is.values().next().value}[${e}m`,as=e=>`${is.values().next().value}${ss}${e}`,cs=(e,t,n)=>{const r=[...t];let i=!1,s=!1,o=Ji(pe(e[e.length-1]));for(const[t,a]of r.entries()){const c=Ji(a);o+c<=n?e[e.length-1]+=a:(e.push(a),o=0),is.has(a)&&(i=!0,s=r.slice(t+1).join("").startsWith(ss)),i?s?""===a&&(i=!1,s=!1):"m"===a&&(i=!1):(o+=c,o===n&&t<r.length-1&&(e.push(""),o=0))}!o&&e[e.length-1].length>0&&e.length>1&&(e[e.length-2]+=e.pop())},ls=(e,t,n={})=>{if(!1!==n.trim&&""===e.trim())return"";let r,i,s="";const o=(e=>e.split(" ").map((e=>Ji(e))))(e);let a=[""];for(const[r,i]of e.split(" ").entries()){!1!==n.trim&&(a[a.length-1]=a[a.length-1].trimStart());let e=Ji(a[a.length-1]);if(0!==r&&(e>=t&&(!1===n.wordWrap||!1===n.trim)&&(a.push(""),e=0),(e>0||!1===n.trim)&&(a[a.length-1]+=" ",e++)),n.hard&&o[r]>t){const n=t-e,s=1+Math.floor((o[r]-n-1)/t);Math.floor((o[r]-1)/t)<s&&a.push(""),cs(a,i,t)}else{if(e+o[r]>t&&e>0&&o[r]>0){if(!1===n.wordWrap&&e<t){cs(a,i,t);continue}a.push("")}e+o[r]>t&&!1===n.wordWrap?cs(a,i,t):a[a.length-1]+=i}}!1!==n.trim&&(a=a.map((e=>(e=>{const t=e.split(" ");let n=t.length;for(;n>0&&!(Ji(t[n-1])>0);)n--;return n===t.length?e:t.slice(0,n).join(" ")+t.slice(n).join("")})(e))));const c=[...a.join("\n")];for(const[e,t]of c.entries()){if(s+=t,is.has(t)){const{groups:t}=new RegExp(`(?:\\[(?<code>\\d+)m|\\${ss}(?<uri>.*))`).exec(c.slice(e).join(""))||{groups:{}};if(void 0!==t.code){const e=Number.parseFloat(t.code);r=39===e?void 0:e}else void 0!==t.uri&&(i=0===t.uri.length?void 0:t.uri)}const n=rs.codes.get(Number(r));"\n"===c[e+1]?(i&&(s+=as("")),r&&n&&(s+=os(n))):"\n"===t&&(r&&n&&(s+=os(r)),i&&(s+=as(i)))}return s};function hs(e){return e.split("\n").length}function us(e){return e.split("\n").pop()}class fs{constructor(e){this.height=0,this.extraLinesUnderPrompt=0,this.rl=e}renderWithSpinner(e,t){let n,r,i;this.spinnerId&&clearInterval(this.spinnerId),t?(n=ve(t),r=()=>e,i=()=>n.frame()):(n=ve(e),r=()=>n.frame(),i=()=>""),this.spinnerId=setInterval((()=>this.render(r(),i(),!0)),n.interval)}render(e,t,n=!1){this.spinnerId&&!n&&clearInterval(this.spinnerId),this.rl.output.unmute(),this.clean(this.extraLinesUnderPrompt);const r=pe(us(e));let i=r;this.rl.line.length&&(i=i.slice(0,-this.rl.line.length)),this.rl.setPrompt(i);const s=this.rl._getCursorPos(),o=this.normalizedCliWidth();e=this.forceLineReturn(e,o),t&&(t=this.forceLineReturn(t,o)),r.length%o==0&&(e+="\n");const a=e+(t?"\n"+t:"");this.rl.output.write(a);const c=Math.floor(r.length/o)-s.rows+(t?hs(t):0);var l,h;c>0&&(l=this.rl,h=c,l.output.write(Hi.cursorUp(h))),Gi(this.rl,Ji(us(a))),s.cols>0&&function(e,t){e.output.write(Hi.cursorForward(t))}(this.rl,s.cols),this.extraLinesUnderPrompt=c,this.height=hs(a),this.rl.output.mute()}clean(e){e>0&&Yi(this.rl,e),Qi(this.rl,this.height)}done(){this.rl.setPrompt(""),this.rl.output.unmute(),this.rl.output.write("\n")}releaseCursor(){this.extraLinesUnderPrompt>0&&Yi(this.rl,this.extraLinesUnderPrompt)}normalizedCliWidth(){return v({defaultWidth:80,output:this.rl.output})}breakLines(e,t=this.normalizedCliWidth()){return e.map((e=>{return(n=e,r=t,i={trim:!1,hard:!0},String(n).normalize().replace(/\r\n/g,"\n").split("\n").map((e=>ls(e,r,i))).join("\n")).split("\n");var n,r,i}))}forceLineReturn(e,t=this.normalizedCliWidth()){return this.breakLines(e.split("\n"),t).flat().join("\n")}}const ds={defaults:g,clone:m};class ps{constructor(e,t,n){Object.assign(this,{answers:n,status:"pending"}),this.opt=ds.defaults(ds.clone(e),{validate:()=>!0,validatingText:"",filter:e=>e,filteringText:"",when:()=>!0,suffix:"",prefix:oe.green("?")}),this.opt.name||this.throwParamError("name"),this.opt.message||(this.opt.message=this.opt.name+":"),Array.isArray(this.opt.choices)&&(this.opt.choices=new Fi(this.opt.choices,n)),this.rl=t,this.screen=new fs(this.rl)}run(){return new Promise(((e,t)=>{this._run((t=>e(t)),(e=>t(e)))}))}_run(e){e()}throwParamError(e){throw new Error("You must provide a `"+e+"` parameter")}close(){this.screen.releaseCursor()}handleSubmitEvents(e){const t=this,n=p(this.opt.validate),r=p(this.opt.filter),i=e.pipe(Ii((e=>(this.startSpinner(e,this.opt.filteringText),r(e,t.answers).then((e=>(this.startSpinner(e,this.opt.validatingText),n(e,t.answers).then((t=>({isValid:t,value:e})),(t=>({isValid:t,value:e}))))),(e=>({isValid:e})))))),Ri()),s=i.pipe(Ci((e=>!0===e.isValid)),Ti(1));return{success:s,error:i.pipe(Ci((e=>!0!==e.isValid)),Ni(s))}}startSpinner(e,t){e=this.getSpinningValue(e);const n=t?this.getQuestion()+e:this.getQuestion().slice(this.opt.prefix.length+1)+e;this.screen.renderWithSpinner(n,t)}getSpinningValue(e){return e}getQuestion(){let e=(this.opt.prefix?this.opt.prefix+" ":"")+oe.bold(this.opt.message)+this.opt.suffix+oe.reset(" ");return null!=this.opt.default&&"touched"!==this.status&&"answered"!==this.status&&("password"===this.opt.type?e+=oe.italic.dim("[hidden] "):e+=oe.dim("("+this.opt.default+") ")),e}}function gs(e,t){return{value:e,key:t||{}}}function ms(e){const t=ji(e.input,"keypress",gs).pipe(Ni(ji(e,"close"))).pipe(Ci((({key:e})=>"enter"!==e.name&&"return"!==e.name)));return{line:ji(e,"line"),keypress:t,normalizedUpKey:t.pipe(Ci((({key:e})=>"up"===e.name||"k"===e.name||"p"===e.name&&e.ctrl)),Ri()),normalizedDownKey:t.pipe(Ci((({key:e})=>"down"===e.name||"j"===e.name||"n"===e.name&&e.ctrl)),Ri()),numberKey:t.pipe(Ci((e=>e.value&&"123456789".indexOf(e.value)>=0)),bi((e=>Number(e.value))),Ri()),spaceKey:t.pipe(Ci((({key:e})=>e&&"space"===e.name)),Ri()),aKey:t.pipe(Ci((({key:e})=>e&&"a"===e.name)),Ri()),iKey:t.pipe(Ci((({key:e})=>e&&"i"===e.name)),Ri())}}class ys{constructor(e,t={}){const{isInfinite:n=!0}=t;this.lastIndex=0,this.screen=e,this.isInfinite=n}paginate(e,t,n){n=n||7;let r=e.split("\n");if(this.screen&&(r=this.screen.breakLines(r),t=r.map((e=>e.length)).splice(0,t).reduce(((e,t)=>e+t),0),r=r.flat()),r.length<=n)return e;const i=this.isInfinite?this.getInfiniteLines(r,t,n):this.getFiniteLines(r,t,n);return this.lastIndex=t,i.join("\n")+"\n"+oe.dim("(Move up and down to reveal more choices)")}getInfiniteLines(e,t,n){void 0===this.pointer&&(this.pointer=0);const r=Math.floor(n/2);this.pointer<r&&this.lastIndex<t&&t-this.lastIndex<n&&(this.pointer=Math.min(r,this.pointer+t-this.lastIndex));const i=[e,e,e].flat(),s=Math.max(0,t+e.length-this.pointer);return i.splice(s,n)}getFiniteLines(e,t,n){let r=t-n/2;return r<0?r=0:r+n>e.length&&(r=e.length-n),e.splice(r,n)}}function bs(e,t,n){const r=n.choices.realLength,i=!("loop"in n)||Boolean(n.loop);if("up"===t)return e>0?e-1:i?r-1:e;if("down"===t)return e<r-1?e+1:i?0:e;throw new Error("dir must be up or down")}class vs extends ps{constructor(e,t,n){super(e,t,n),this.opt.choices||this.throwParamError("choices"),this.firstRender=!0,this.selected=0;const r=this.opt.default;if("number"==typeof r&&r>=0&&r<this.opt.choices.realLength)this.selected=r;else if("number"!=typeof r&&null!=r){const e=this.opt.choices.realChoices.findIndex((({value:e})=>e===r));this.selected=Math.max(e,0)}this.opt.default=null;const i=void 0===this.opt.loop||this.opt.loop;this.paginator=new ys(this.screen,{isInfinite:i})}_run(e){this.done=e;const t=this,n=ms(this.rl);return n.normalizedUpKey.pipe(Ni(n.line)).forEach(this.onUpKey.bind(this)),n.normalizedDownKey.pipe(Ni(n.line)).forEach(this.onDownKey.bind(this)),n.numberKey.pipe(Ni(n.line)).forEach(this.onNumberKey.bind(this)),n.line.pipe(Ti(1),bi(this.getCurrentValue.bind(this)),Ii((e=>p(t.opt.filter)(e,t.answers).catch((e=>e))))).forEach(this.onSubmit.bind(this)),le.hide(),this.render(),this}render(){let e=this.getQuestion();if(this.firstRender&&(e+=oe.dim("(Use arrow keys)")),"answered"===this.status)e+=oe.cyan(this.opt.choices.getChoice(this.selected).short);else{const t=function(e,t){let n="",r=0;return e.forEach(((e,i)=>{if("separator"===e.type)return r++,void(n+="  "+e+"\n");if(e.disabled)return r++,n+="  - "+e.name,n+=` (${"string"==typeof e.disabled?e.disabled:"Disabled"})`,void(n+="\n");const s=i-r===t;let o=(s?cr.pointer+" ":"  ")+e.name;s&&(o=oe.cyan(o)),n+=o+" \n"})),n.replace(/\n$/,"")}(this.opt.choices,this.selected),n=this.opt.choices.indexOf(this.opt.choices.getChoice(this.selected)),r=this.opt.choices.reduce(((e,t,r)=>{if(r>n)return e;if("separator"===t.type)return e+1;let i=t.name;return"string"!=typeof i?e+1:(i=i.split("\n"),e+i.length)}),0)-1;e+="\n"+this.paginator.paginate(t,r,this.opt.pageSize)}this.firstRender=!1,this.screen.render(e)}onSubmit(e){this.status="answered",this.render(),this.screen.done(),le.show(),this.done(e)}getCurrentValue(){return this.opt.choices.getChoice(this.selected).value}onUpKey(){this.selected=bs(this.selected,"up",this.opt),this.render()}onDownKey(){this.selected=bs(this.selected,"down",this.opt),this.render()}onNumberKey(e){e<=this.opt.choices.realLength&&(this.selected=e-1),this.render()}}class ws extends ps{_run(e){this.done=e;const t=ms(this.rl),n=t.line.pipe(bi(this.filterInput.bind(this))),r=this.handleSubmitEvents(n);return r.success.forEach(this.onEnd.bind(this)),r.error.forEach(this.onError.bind(this)),t.keypress.pipe(Ni(r.success)).forEach(this.onKeypress.bind(this)),this.render(),this}render(e){let t="",n="",r=this.getQuestion();const{transformer:i}=this.opt,s="answered"===this.status;n=s?this.answer:this.rl.line,r+=i?i(n,this.answers,{isFinal:s}):s?oe.cyan(n):n,e&&(t=oe.red(">> ")+e),this.screen.render(r,t)}filterInput(e){return e||(null==this.opt.default?"":this.opt.default)}onEnd(e){this.answer=e.value,this.status="answered",this.render(),this.screen.done(),this.done(e.value)}onError({value:e="",isValid:t}){this.rl.line+=e,this.rl.cursor+=e.length,this.render(t)}onKeypress(){this.status="touched",this.render()}}class Es extends ws{filterInput(e){if(e&&"string"==typeof e){const t=(e=e.trim()).match(/(^-?\d+|^-?\d+\.\d*|^\d*\.\d+)(e\d+)?$/);if(t)return Number(t[0])}return null==this.opt.default?NaN:this.opt.default}}class Os extends ps{constructor(e,t,n){super(e,t,n);let r=!0;Object.assign(this.opt,{filter(e){let t=r;return null!=e&&""!==e&&(t=/^y(es)?/i.test(e)),t}}),null!=this.opt.default&&(r=Boolean(this.opt.default)),this.opt.default=r?"Y/n":"y/N"}_run(e){this.done=e;const t=ms(this.rl);return t.keypress.pipe(Ni(t.line)).forEach(this.onKeypress.bind(this)),t.line.pipe(Ti(1)).forEach(this.onEnd.bind(this)),this.render(),this}render(e){let t=this.getQuestion();return t+="boolean"==typeof e?oe.cyan(e?"Yes":"No"):this.rl.line,this.screen.render(t),this}onEnd(e){this.status="answered";const t=this.opt.filter(e);this.render(t),this.screen.done(),this.done(t)}onKeypress(){this.render()}}class xs extends ps{constructor(e,t,n){super(e,t,n),this.hiddenLine="",this.lastKey="",this.opt.choices||this.throwParamError("choices"),this.opt.validChoices=this.opt.choices.filter($i.exclude),this.selected=0,this.rawDefault=0,Object.assign(this.opt,{validate:e=>null!=e});const r=this.opt.default;if("number"==typeof r&&r>=0&&r<this.opt.choices.realLength)this.selected=r,this.rawDefault=r;else if("number"!=typeof r&&null!=r){const e=this.opt.choices.realChoices.findIndex((({value:e})=>e===r)),t=Math.max(e,0);this.selected=t,this.rawDefault=t}this.opt.default=null;const i=void 0===this.opt.loop||this.opt.loop;this.paginator=new ys(void 0,{isInfinite:i})}_run(e){this.done=e;const t=ms(this.rl),n=t.line.pipe(bi(this.getCurrentValue.bind(this))),r=this.handleSubmitEvents(n);return r.success.forEach(this.onEnd.bind(this)),r.error.forEach(this.onError.bind(this)),t.normalizedUpKey.pipe(Ni(r.success)).forEach(this.onUpKey.bind(this)),t.normalizedDownKey.pipe(Ni(r.success)).forEach(this.onDownKey.bind(this)),t.keypress.pipe(Ni(r.success)).forEach(this.onKeypress.bind(this)),this.render(),this}render(e){let t=this.getQuestion(),n="";if("answered"===this.status)t+=oe.cyan(this.opt.choices.getChoice(this.selected).short);else{const e=function(e,t){let n="",r=0;return e.forEach(((e,i)=>{if(n+=n?"\n  ":"  ","separator"===e.type)return r++,void(n+=" "+e);const s=i-r;let o=s+1+") "+e.name;s===t&&(o=oe.cyan(o)),n+=o})),n}(this.opt.choices,this.selected);t+="\n"+this.paginator.paginate(e,this.selected,this.opt.pageSize),t+="\n  Answer: "}t+=this.rl.line,e&&(n="\n"+oe.red(">> ")+e),this.screen.render(t,n)}getCurrentValue(e){null==e?e=this.rawDefault:""===e?(this.selected=void 0===this.selected?-1:this.selected,e=this.selected):e-=1;const t=this.opt.choices.getChoice(e);return t?t.value:null}onEnd(e){this.status="answered",this.answer=e.value,this.render(),this.screen.done(),this.done(e.value)}onError(){this.render("Please enter a valid index")}onKeypress(){let e;e="arrow"===this.lastKey?this.hiddenLine.length?Number(this.hiddenLine)-1:0:this.rl.line.length?Number(this.rl.line)-1:0,this.lastKey="",this.opt.choices.getChoice(e)?this.selected=e:this.selected=void 0,this.render()}onUpKey(){this.onArrowKey("up")}onDownKey(){this.onArrowKey("down")}onArrowKey(e){this.selected=bs(this.selected,e,this.opt)||0,this.hiddenLine=String(this.selected+1),this.rl.line="",this.lastKey="arrow"}}class Ss extends ps{constructor(e,t,n){super(e,t,n),this.opt.choices||this.throwParamError("choices"),this.validateChoices(this.opt.choices),this.opt.choices.push({key:"h",name:"Help, list all options",value:"help"}),this.opt.validate=e=>null==e?"Please enter a valid command":"help"!==e,this.opt.default=this.generateChoicesString(this.opt.choices,this.opt.default),this.paginator=new ys(this.screen)}_run(e){this.done=e;const t=ms(this.rl),n=this.handleSubmitEvents(t.line.pipe(bi(this.getCurrentValue.bind(this))));return n.success.forEach(this.onSubmit.bind(this)),n.error.forEach(this.onError.bind(this)),this.keypressObs=t.keypress.pipe(Ni(n.success)).forEach(this.onKeypress.bind(this)),this.render(),this}render(e,t){let n=this.getQuestion(),r="";if("answered"===this.status)n+=oe.cyan(this.answer);else if("expanded"===this.status){const e=function(e,t){let n="";return e.forEach((e=>{if(n+="\n  ","separator"===e.type)return void(n+=" "+e);let r=e.key+") "+e.name;t===e.key&&(r=oe.cyan(r)),n+=r})),n}(this.opt.choices,this.selectedKey);n+=this.paginator.paginate(e,this.selectedKey,this.opt.pageSize),n+="\n  Answer: "}n+=this.rl.line,e&&(r=oe.red(">> ")+e),t&&(r=oe.cyan(">> ")+t),this.screen.render(n,r)}getCurrentValue(e){e||(e=this.rawDefault);const t=this.opt.choices.where({key:e.toLowerCase().trim()})[0];return t?t.value:null}getChoices(){let e="";return this.opt.choices.forEach((t=>{if(e+="\n  ","separator"===t.type)return void(e+=" "+t);let n=t.key+") "+t.name;this.selectedKey===t.key&&(n=oe.cyan(n)),e+=n})),e}onError(e){if("help"===e.value)return this.selectedKey="",this.status="expanded",void this.render();this.render(e.isValid)}onSubmit(e){this.status="answered";const t=this.opt.choices.where({value:e.value})[0];this.answer=t.short||t.name,this.render(),this.screen.done(),this.done(e.value)}onKeypress(){this.selectedKey=this.rl.line.toLowerCase();const e=this.opt.choices.where({key:this.selectedKey})[0];"expanded"===this.status?this.render():this.render(null,e?e.name:null)}validateChoices(e){let t;const n=[],r={};if(e.filter($i.exclude).forEach((e=>{e.key&&1===e.key.length||(t=!0),e.key=String(e.key).toLowerCase(),r[e.key]&&n.push(e.key),r[e.key]=!0})),t)throw new Error("Format error: `key` param must be a single letter and is required.");if(r.h)throw new Error("Reserved key error: `key` param cannot be `h` - this value is reserved.");if(n.length)throw new Error("Duplicate key error: `key` param must be unique. Duplicates: "+[...new Set(n)].join(","))}generateChoicesString(e,t){let n=e.realLength-1;if("number"==typeof t&&this.opt.choices.getChoice(t))n=t;else if("string"==typeof t){const r=e.realChoices.findIndex((({value:e})=>e===t));n=-1===r?n:r}const r=this.opt.choices.pluck("key");return this.rawDefault=r[n],r[n]=String(r[n]).toUpperCase(),r.join("")}}class ks extends ps{constructor(e,t,n){super(e,t,n),this.opt.choices||this.throwParamError("choices"),Array.isArray(this.opt.default)&&this.opt.choices.forEach((function(e){this.opt.default.indexOf(e.value)>=0&&(e.checked=!0)}),this),this.pointer=0,this.opt.default=null;const r=void 0===this.opt.loop||this.opt.loop;this.paginator=new ys(this.screen,{isInfinite:r})}_run(e){this.done=e;const t=ms(this.rl),n=this.handleSubmitEvents(t.line.pipe(bi(this.getCurrentValue.bind(this))));return n.success.forEach(this.onEnd.bind(this)),n.error.forEach(this.onError.bind(this)),t.normalizedUpKey.pipe(Ni(n.success)).forEach(this.onUpKey.bind(this)),t.normalizedDownKey.pipe(Ni(n.success)).forEach(this.onDownKey.bind(this)),t.numberKey.pipe(Ni(n.success)).forEach(this.onNumberKey.bind(this)),t.spaceKey.pipe(Ni(n.success)).forEach(this.onSpaceKey.bind(this)),t.aKey.pipe(Ni(n.success)).forEach(this.onAllKey.bind(this)),t.iKey.pipe(Ni(n.success)).forEach(this.onInverseKey.bind(this)),le.hide(),this.render(),this.firstRender=!1,this}render(e){let t=this.getQuestion(),n="";if(this.dontShowHints||(t+="(Press "+oe.cyan.bold("<space>")+" to select, "+oe.cyan.bold("<a>")+" to toggle all, "+oe.cyan.bold("<i>")+" to invert selection, and "+oe.cyan.bold("<enter>")+" to proceed)"),"answered"===this.status)t+=oe.cyan(this.selection.join(", "));else{const e=function(e,t){let n="",r=0;return e.forEach(((e,i)=>{if("separator"===e.type)return r++,void(n+=" "+e+"\n");if(e.disabled)r++,n+=" - "+e.name,n+=` (${"string"==typeof e.disabled?e.disabled:"Disabled"})`;else{const s=(e.checked?oe.green(cr.radioOn):cr.radioOff)+" "+e.name;n+=i-r===t?oe.cyan(cr.pointer+s):" "+s}n+="\n"})),n.replace(/\n$/,"")}(this.opt.choices,this.pointer),n=this.opt.choices.indexOf(this.opt.choices.getChoice(this.pointer)),r=this.opt.choices.reduce(((e,t,r)=>{if(r>n)return e;if("separator"===t.type)return e+1;let i=t.name;return"string"!=typeof i?e+1:(i=i.split("\n"),e+i.length)}),0)-1;t+="\n"+this.paginator.paginate(e,r,this.opt.pageSize)}e&&(n=oe.red(">> ")+e),this.screen.render(t,n)}onEnd(e){this.status="answered",this.dontShowHints=!0,this.render(),this.screen.done(),le.show(),this.done(e.value)}onError(e){this.render(e.isValid)}getCurrentValue(){const e=this.opt.choices.filter((e=>Boolean(e.checked)&&!e.disabled));return this.selection=e.map((e=>e.short)),e.map((e=>e.value))}onUpKey(){this.pointer=bs(this.pointer,"up",this.opt),this.render()}onDownKey(){this.pointer=bs(this.pointer,"down",this.opt),this.render()}onNumberKey(e){e<=this.opt.choices.realLength&&(this.pointer=e-1,this.toggleChoice(this.pointer)),this.render()}onSpaceKey(){this.toggleChoice(this.pointer),this.render()}onAllKey(){const e=Boolean(this.opt.choices.find((e=>"separator"!==e.type&&!e.checked)));this.opt.choices.forEach((t=>{"separator"!==t.type&&(t.checked=e)})),this.render()}onInverseKey(){this.opt.choices.forEach((e=>{"separator"!==e.type&&(e.checked=!e.checked)})),this.render()}toggleChoice(e){const t=this.opt.choices.getChoice(e);void 0!==t&&(this.opt.choices.getChoice(e).checked=!t.checked)}}function js(e,t){return t="string"==typeof t?t:"*",0===(e=String(e)).length?"":new Array(e.length+1).join(t)}class _s extends ps{_run(e){this.done=e;const t=ms(this.rl),n=t.line.pipe(bi(this.filterInput.bind(this))),r=this.handleSubmitEvents(n);return r.success.forEach(this.onEnd.bind(this)),r.error.forEach(this.onError.bind(this)),t.keypress.pipe(Ni(r.success)).forEach(this.onKeypress.bind(this)),this.render(),this}render(e){let t=this.getQuestion(),n="";"answered"===this.status?t+=this.getMaskedValue(this.answer):t+=this.getMaskedValue(this.rl.line||""),e&&(n="\n"+oe.red(">> ")+e),this.screen.render(t,n)}getMaskedValue(e){return"answered"===this.status?this.opt.mask?oe.cyan(js(e,this.opt.mask)):oe.italic.dim("[hidden]"):this.opt.mask?js(e,this.opt.mask):oe.italic.dim("[input is hidden] ")}getSpinningValue(e){return this.getMaskedValue(e)}filterInput(e){return e||(null==this.opt.default?"":this.opt.default)}onEnd(e){this.status="answered",this.answer=e.value,this.render(),this.screen.done(),this.done(e.value)}onError(e){this.render(e.isValid)}onKeypress(){this.opt.default&&(this.opt.default=void 0),this.render()}}class Cs extends ps{_run(e){this.done=e,this.editorResult=new Yr;const t=ms(this.rl);this.lineSubscription=t.line.subscribe(this.startExternalEditor.bind(this));void 0===this.opt.waitUserInput||this.opt.waitUserInput||this.startExternalEditor();const n=this.handleSubmitEvents(this.editorResult);return n.success.forEach(this.onEnd.bind(this)),n.error.forEach(this.onError.bind(this)),this.currentText=this.opt.default,this.opt.default=null,this.render(),this}render(e){let t="",n=this.getQuestion();"answered"===this.status?n+=oe.dim("Received"):n+=oe.dim("Press <enter> to launch your preferred editor."),e&&(t=oe.red(">> ")+e),this.screen.render(n,t)}startExternalEditor(){this.rl.pause(),O.editAsync(this.currentText,this.endExternalEditor.bind(this))}endExternalEditor(e,t){this.rl.resume(),e?this.editorResult.error(e):this.editorResult.next(t)}onEnd(e){this.editorResult.unsubscribe(),this.lineSubscription.unsubscribe(),this.answer=e.value,this.status="answered",this.render(),this.screen.done(),this.done(this.answer)}onError(e){this.render(e.isValid)}}class As{constructor(e){this.rl||(this.rl=s.createInterface(function(e={}){e.skipTTYChecks=void 0===e.skipTTYChecks||e.skipTTYChecks;const t=e.input||process.stdin;if(!e.skipTTYChecks&&!t.isTTY){const e=new Error("Prompts can not be meaningfully rendered in non-TTY environments");throw e.isTtyError=!0,e}const n=new S;n.pipe(e.output||process.stdout);const r=n;return{terminal:!0,...e,input:t,output:r}}(e))),this.rl.resume(),this.onForceClose=this.onForceClose.bind(this),process.on("exit",this.onForceClose),this.rl.on("SIGINT",this.onForceClose)}onForceClose(){this.close(),process.kill(process.pid,"SIGINT"),console.log("")}close(){this.rl.removeListener("SIGINT",this.onForceClose),process.removeListener("exit",this.onForceClose),this.rl.output.unmute(),this.activePrompt&&"function"==typeof this.activePrompt.close&&this.activePrompt.close(),this.rl.output.end(),this.rl.pause(),this.rl.close()}}const Ps=function(e,t,n){return"function"!=typeof e[t]?yi(e):mi(p(e[t])(n).then((n=>(e[t]=n,e))))},Ds={isPlainObject:k,set:_,get:j};class Ms extends As{constructor(e,t){super(t),this.prompts=e}run(e,t){Ds.isPlainObject(t)?this.answers={...t}:this.answers={},Ds.isPlainObject(e)&&(e=Object.values(e).every((e=>Ds.isPlainObject(e)&&void 0===e.name))?Object.entries(e).map((([e,t])=>({name:e,...t}))):[e]);const n=Array.isArray(e)?mi(e):e;return this.process=n.pipe(Pi(this.processQuestion.bind(this)),Li()),this.process.connect(),this.process.pipe(Ai(((e,t)=>(Ds.set(e,t.name,t.answer),e)),this.answers)).toPromise(Promise).then(this.onCompletion.bind(this),this.onError.bind(this))}onCompletion(){return this.close(),this.answers}onError(e){return this.close(),Promise.reject(e)}processQuestion(e){return e={...e},Oi((()=>yi(e).pipe(Pi(this.setDefaultType.bind(this)),Pi(this.filterIfRunnable.bind(this)),Pi((()=>Ps(e,"message",this.answers))),Pi((()=>Ps(e,"default",this.answers))),Pi((()=>Ps(e,"choices",this.answers))),Pi(this.fetchAnswer.bind(this)))))}fetchAnswer(e){const t=this.prompts[e.type];return this.activePrompt=new t(e,this.rl,this.answers),Oi((()=>mi(this.activePrompt.run().then((t=>({name:e.name,answer:t}))))))}setDefaultType(e){return this.prompts[e.type]||(e.type="input"),Oi((()=>yi(e)))}filterIfRunnable(e){if(!0!==e.askAnswered&&void 0!==Ds.get(this.answers,e.name))return Zr();if(!1===e.when)return Zr();if("function"!=typeof e.when)return yi(e);const{answers:t}=this;return Oi((()=>mi(p(e.when)(t).then((t=>{if(t)return e}))).pipe(Ci((e=>null!=e)))))}}function Ts(e){const t=function(n,r){let i;try{i=new Ms(t.prompts,e)}catch(e){return Promise.reject(e)}const s=i.run(n,r);return s.ui=i,s};return t.prompts={},t.registerPrompt=function(e,n){return t.prompts[e]=n,this},t.restoreDefaultPrompts=function(){this.registerPrompt("list",vs),this.registerPrompt("input",ws),this.registerPrompt("number",Es),this.registerPrompt("confirm",Os),this.registerPrompt("rawlist",xs),this.registerPrompt("expand",Ss),this.registerPrompt("checkbox",ks),this.registerPrompt("password",_s),this.registerPrompt("editor",Cs)},t.restoreDefaultPrompts(),t}const Is=Ts();const Ls={prompt:Is,ui:{BottomBar:class extends As{constructor(e={}){super(e),this.log=x(this.writeLog.bind(this)),this.bottomBar=e.bottomBar||"",this.render()}render(){return this.write(this.bottomBar),this}clean(){return Qi(this.rl,this.bottomBar.split("\n").length),this}updateBottomBar(e){return Qi(this.rl,1),this.rl.output.unmute(),this.clean(),this.bottomBar=e,this.render(),this.rl.output.mute(),this}writeLog(e){return this.rl.output.unmute(),this.clean(),this.rl.output.write(this.enforceLF(e.toString())),this.render(),this.rl.output.mute(),this}enforceLF(e){return e.match(/[\r\n]$/)?e:e+"\n"}write(e){const t=e.split(/\n/);this.height=t.length,this.rl.setPrompt(t[t.length-1]),0===this.rl.output.rows&&0===this.rl.output.columns&&Gi(this.rl,e.length+this.rl.line.length),this.rl.output.write(e)}},Prompt:Ms},createPromptModule:Ts,registerPrompt:function(e,t){Is.registerPrompt(e,t)},restoreDefaultPrompts:function(){Is.restoreDefaultPrompts()},Separator:$i};var Rs=(e={})=>(No(e),e),Bs=process.env.__TESTING_RIMRAF_PLATFORM__||process.platform;const Ns=(e,t={})=>{const n=typeof e;if("string"!==n){const t=e&&"object"===n&&e.constructor,r=`The "path" argument must be of type string. Received ${t&&t.name?`an instance of ${t.name}`:"object"===n?h.inspect(e):`type ${n} ${e}`}`;throw Object.assign(new TypeError(r),{path:e,code:"ERR_INVALID_ARG_TYPE"})}if(/\0/.test(e)){const t="path must be a string without null bytes";throw Object.assign(new TypeError(t),{path:e,code:"ERR_INVALID_ARG_VALUE"})}e=c.resolve(e);const{root:r}=c.parse(e);if(e===r&&!1!==t.preserveRoot){const t="refusing to remove root directory without preserveRoot:false";throw Object.assign(new Error(t),{path:e,code:"ERR_PRESERVE_ROOT"})}if("win32"===Bs){const t=/[*|"<>?:]/,{root:n}=c.parse(e);if(t.test(e.substring(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e},$s={chmod:(e,t)=>new Promise(((n,r)=>l.chmod(e,t,((e,...t)=>e?r(e):n(...t))))),mkdir:(e,t)=>new Promise(((n,r)=>l.mkdir(e,t,((e,t)=>e?r(e):n(t))))),readdir:e=>new Promise(((t,n)=>l.readdir(e,((e,r)=>e?n(e):t(r))))),rename:(e,t)=>new Promise(((n,r)=>l.rename(e,t,((e,...t)=>e?r(e):n(...t))))),rm:(e,t)=>new Promise(((n,r)=>l.rm(e,t,((e,...t)=>e?r(e):n(...t))))),rmdir:e=>new Promise(((t,n)=>l.rmdir(e,((e,...r)=>e?n(e):t(...r))))),stat:e=>new Promise(((t,n)=>l.stat(e,((e,r)=>e?n(e):t(r))))),unlink:e=>new Promise(((t,n)=>l.unlink(e,((e,...r)=>e?n(e):t(...r)))))},{readdir:Us}=$s,Fs=e=>Us(e).catch((e=>e)),qs=e=>{try{return l.readdirSync(e)}catch(e){return e}},zs=async e=>e.catch((e=>{if("ENOENT"!==e.code)throw e})),Ws=e=>{try{return e()}catch(e){if("ENOENT"!==e?.code)throw e}},{rmdir:Ks,unlink:Vs}=$s,Hs=async(e,t)=>{const n=await Fs(e);if(!Array.isArray(n)){if("ENOENT"===n.code)return;if("ENOTDIR"!==n.code)throw n;return zs(Vs(e))}if(await Promise.all(n.map((n=>Hs(c.resolve(e,n),t)))),!1!==t.preserveRoot||e!==c.parse(e).root)return zs(Ks(e))},Gs=(e,t)=>{const n=qs(e);if(!Array.isArray(n)){if("ENOENT"===n.code)return;if("ENOTDIR"!==n.code)throw n;return Ws((()=>l.unlinkSync(e)))}for(const r of n)Gs(c.resolve(e,r),t);if(!1!==t.preserveRoot||e!==c.parse(e).root)return Ws((()=>l.rmdirSync(e)))},{chmod:Ys}=$s,Qs=e=>async t=>{try{return await e(t)}catch(n){const r=n;if("ENOENT"===r?.code)return;if("EPERM"===r?.code){try{await Ys(t,438)}catch(e){const t=e;if("ENOENT"===t?.code)return;throw n}return await e(t)}throw n}},Js=e=>t=>{try{return e(t)}catch(n){const r=n;if("ENOENT"===r?.code)return;if("EPERM"===r?.code){try{l.chmodSync(t,438)}catch(e){const t=e;if("ENOENT"===t?.code)return;throw n}return e(t)}throw n}},Zs=new Set(["EMFILE","ENFILE","EBUSY"]),Xs=e=>{const t=async(n,r,i=1,s=0)=>{const o=r.maxBackoff||200,a=r.backoff||1.2,c=r.maxRetries||10;let l=0;for(;;)try{return await e(n)}catch(e){const h=e;if(h?.path===n&&h?.code&&Zs.has(h.code)){if(i=Math.ceil(i*a),(s=i+s)<o)return new Promise(((e,o)=>{setTimeout((()=>{t(n,r,i,s).then(e,o)}),i)}));if(l<c){l++;continue}}throw e}};return t},eo=e=>(t,n)=>{const r=n.maxRetries||10;let i=0;for(;;)try{return e(t)}catch(e){const n=e;if(n?.path===t&&n?.code&&Zs.has(n.code)&&i<r){i++;continue}throw e}},{stat:to}=$s,no="win32"===Bs?async e=>{const{root:t}=c.parse(e),n=A.tmpdir(),{root:r}=c.parse(n);if(t.toLowerCase()===r.toLowerCase())return n;const i=c.resolve(t,"/temp");return await(e=>to(e).then((e=>e.isDirectory()),(()=>!1)))(i)?i:t}:async()=>A.tmpdir(),ro="win32"===Bs?e=>{const{root:t}=c.parse(e),n=A.tmpdir(),{root:r}=c.parse(n);if(t.toLowerCase()===r.toLowerCase())return n;const i=c.resolve(t,"/temp");return(e=>{try{return l.statSync(e).isDirectory()}catch(e){return!1}})(i)?i:t}:()=>A.tmpdir(),{rename:io,unlink:so,rmdir:oo,chmod:ao}=$s,co=e=>`.${c.basename(e)}.${Math.random()}`,lo=async e=>so(e).catch((t=>{if("EPERM"===t.code)return ao(e,438).then((()=>so(e)),(e=>{if("ENOENT"!==e.code)throw t}));if("ENOENT"!==t.code)throw t})),ho=e=>{try{l.unlinkSync(e)}catch(t){if("EPERM"===t?.code)try{return l.chmodSync(e,438)}catch(e){if("ENOENT"===e?.code)return;throw t}else if("ENOENT"===t?.code)return;throw t}},uo=async(e,t)=>{if(!t.tmp)return uo(e,{...t,tmp:await no(e)});if(e===t.tmp&&c.parse(e).root!==e)throw new Error("cannot delete temp directory used for deletion");const n=await Fs(e);if(!Array.isArray(n)){if("ENOENT"===n.code)return;if("ENOTDIR"!==n.code)throw n;return await zs(fo(e,t.tmp,lo))}return await Promise.all(n.map((n=>uo(c.resolve(e,n),t)))),!1!==t.preserveRoot||e!==c.parse(e).root?await zs(fo(e,t.tmp,oo)):void 0},fo=async(e,t,n)=>{const r=c.resolve(t,co(e));return await io(e,r),await n(r)},po=(e,t)=>{if(!t.tmp)return po(e,{...t,tmp:ro(e)});const n=t.tmp;if(e===t.tmp&&c.parse(e).root!==e)throw new Error("cannot delete temp directory used for deletion");const r=qs(e);if(!Array.isArray(r)){if("ENOENT"===r.code)return;if("ENOTDIR"!==r.code)throw r;return Ws((()=>go(e,n,ho)))}for(const n of r)po(c.resolve(e,n),t);return!1!==t.preserveRoot||e!==c.parse(e).root?Ws((()=>go(e,n,l.rmdirSync))):void 0},go=(e,t,n)=>{const r=c.resolve(t,co(e));return l.renameSync(e,r),n(r)},{unlink:mo,rmdir:yo}=$s,bo=Xs(Qs(mo)),vo=eo(Js(l.unlinkSync)),wo=Xs(Qs(yo)),Eo=eo(Js(l.rmdirSync)),Oo=Symbol("start"),xo=Symbol("child"),So=Symbol("finish"),ko=new Set([Oo,xo,So]),jo=async(e,t,n=Oo)=>{if(!ko.has(n))throw new TypeError("invalid third argument passed to rimraf");const r=await Fs(e);if(!Array.isArray(r)){if("ENOENT"===r.code)return;if("ENOTDIR"!==r.code)throw r;return zs(bo(e,t))}if(await Promise.all(r.map((r=>jo(c.resolve(e,r),t,n===Oo?xo:n)))),n===Oo)return jo(e,t,So);if(n===So){if(!1===t.preserveRoot&&e===c.parse(e).root)return;return zs((async(e,t)=>{try{await wo(e,t)}catch(n){if("ENOTEMPTY"===n?.code)return await uo(e,t);throw n}})(e,t))}},_o=(e,t,n=Oo)=>{if(!ko.has(n))throw new TypeError("invalid third argument passed to rimraf");const r=qs(e);if(!Array.isArray(r)){if("ENOENT"===r.code)return;if("ENOTDIR"!==r.code)throw r;return Ws((()=>vo(e,t)))}for(const i of r){const r=n===Oo?xo:n;_o(c.resolve(e,i),t,r)}if(n===Oo)return _o(e,t,So);if(n===So){if(!1===t.preserveRoot&&e===c.parse(e).root)return;return Ws((()=>{((e,t)=>{try{Eo(e,t)}catch(n){if("ENOTEMPTY"===n?.code)return po(e,t);throw n}})(e,t)}))}},Co="win32"===Bs?jo:Hs,Ao="win32"===Bs?_o:Gs,{rm:Po}=$s,Do=(e,t)=>Po(e,{...t,force:!0,recursive:!0}),Mo=(e,t)=>l.rmSync(e,{...t,force:!0,recursive:!0}),To=(process.env.__TESTING_RIMRAF_NODE_VERSION__||process.version).replace(/^v/,"").split("."),Io=+To[0]>14||14==+To[0]&&+To[1]>=14,Lo=Io&&"win32"!==Bs?()=>!0:()=>!1,Ro=Io&&"win32"!==Bs?()=>!0:()=>!1,Bo=(e,t)=>void 0===e||typeof e===t,No=e=>{if(!(e=>!!e&&"object"==typeof e&&Bo(e.preserveRoot,"boolean")&&Bo(e.tmp,"string")&&Bo(e.maxRetries,"number")&&Bo(e.retryDelay,"number")&&Bo(e.backoff,"number")&&Bo(e.maxBackoff,"number"))(e))throw new Error("invalid rimraf options")},$o=e=>async(t,n)=>{const r=Rs(n);await(Array.isArray(t)?Promise.all(t.map((t=>e(Ns(t,r),r)))):e(Ns(t,r),r))},Uo=e=>(t,n)=>{const r=Rs(n);return Array.isArray(t)?t.forEach((t=>e(Ns(t,r),r))):e(Ns(t,r),r)},Fo=Uo(Mo),qo=Object.assign($o(Do),{sync:Fo}),zo=Uo(Ao),Wo=Object.assign($o(Co),{sync:zo}),Ko=Uo(_o),Vo=Object.assign($o(jo),{sync:Ko}),Ho=Uo(Gs),Go=Object.assign($o(Hs),{sync:Ho}),Yo=Uo(po),Qo=Object.assign($o(uo),{sync:Yo}),Jo=Uo(((e,t)=>Ro()?Mo(e,t):Ao(e,t))),Zo=Object.assign($o(((e,t)=>Lo()?Do(e,t):Co(e,t))),{rimraf:Wo,sync:Jo,rimrafSync:Jo,manual:Wo,manualSync:zo,native:qo,nativeSync:Fo,posix:Go,posixSync:Ho,windows:Vo,windowsSync:Ko,moveRemove:Qo,moveRemoveSync:Yo});Zo.rimraf=Zo;const Xo=e=>{if(e)if("object"==typeof e)e={mode:511,...e};else if("number"==typeof e)e={mode:e};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8)}}else e={mode:511};const t=e,n=e.fs||{};return e.mkdir=e.mkdir||n.mkdir||l.mkdir,e.mkdirAsync=e.mkdirAsync?e.mkdirAsync:async(e,n)=>new Promise(((r,i)=>t.mkdir(e,n,((e,t)=>e?i(e):r(t))))),e.stat=e.stat||n.stat||l.stat,e.statAsync=e.statAsync?e.statAsync:async e=>new Promise(((n,r)=>t.stat(e,((e,t)=>e?r(e):n(t))))),e.statSync=e.statSync||n.statSync||l.statSync,e.mkdirSync=e.mkdirSync||n.mkdirSync||l.mkdirSync,t},ea=(e,t,n)=>{const r=c.dirname(e),i={...Xo(t),recursive:!1};if(r===e)try{return i.mkdirSync(e,i)}catch(e){if(e&&"EISDIR"!==e.code)throw e;return}try{return i.mkdirSync(e,i),n||e}catch(t){const s=t;if(s&&"ENOENT"===s.code)return ea(e,i,ea(r,i,n));if(s&&"EEXIST"!==s.code&&s&&"EROFS"!==s.code)throw t;try{if(!i.statSync(e).isDirectory())throw t}catch(e){throw t}}},ta=Object.assign((async(e,t,n)=>{const r=Xo(t);r.recursive=!1;const i=c.dirname(e);return i===e?r.mkdirAsync(e,r).catch((e=>{if(e&&"EISDIR"!==e.code)throw e})):r.mkdirAsync(e,r).then((()=>n||e),(async t=>{const s=t;if(s&&"ENOENT"===s.code)return ta(i,r).then((t=>ta(e,r,t)));if(s&&"EEXIST"!==s.code&&"EROFS"!==s.code)throw t;return r.statAsync(e).then((e=>{if(e.isDirectory())return n;throw t}),(()=>{throw t}))}))}),{sync:ea}),na=async(e,t,n)=>{if(n!==t)return e.statAsync(t).then((e=>e.isDirectory()?n:void 0),(n=>n&&"ENOENT"===n.code?na(e,c.dirname(t),t):void 0))},ra=(e,t,n)=>{if(n!==t)try{return e.statSync(t).isDirectory()?n:void 0}catch(n){return n&&"ENOENT"===n.code?ra(e,c.dirname(t),t):void 0}},ia=(e,t)=>{const n=Xo(t);n.recursive=!0;if(c.dirname(e)===e)return n.mkdirSync(e,n);const r=ra(n,e);try{return n.mkdirSync(e,n),r}catch(t){if(t&&"ENOENT"===t.code)return ea(e,n);throw t}},sa=Object.assign((async(e,t)=>{const n={...Xo(t),recursive:!0};return c.dirname(e)===e?await n.mkdirAsync(e,n):na(n,e).then((t=>n.mkdirAsync(e,n).then((e=>t||e)).catch((t=>{if(t&&"ENOENT"===t.code)return ta(e,n);throw t}))))}),{sync:ia}),oa=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,aa=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=c.resolve(e),"win32"===oa){const t=/[*|"<>?:]/,{root:n}=c.parse(e);if(t.test(e.substring(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e},ca=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),la=+ca[0]>10||10==+ca[0]&&+ca[1]>=12,ha=la?e=>Xo(e).mkdirSync===l.mkdirSync:()=>!1,ua=Object.assign(la?e=>Xo(e).mkdir===l.mkdir:()=>!1,{sync:ha}),fa=(e,t)=>{e=aa(e);const n=Xo(t);return ha(n)?ia(e,n):ea(e,n)},da=Object.assign((async(e,t)=>{e=aa(e);const n=Xo(t);return ua(n)?sa(e,n):ta(e,n)}),{mkdirpSync:fa,mkdirpNative:sa,mkdirpNativeSync:ia,mkdirpManual:ta,mkdirpManualSync:ea,sync:fa,native:sa,nativeSync:ia,manual:ta,manualSync:ea,useNative:ua,useNativeSync:ha});var pa,ga,ma,ya=c.resolve(c.dirname("")),ba=c.join(ya,"/.key/key.json"),va=new T.JSONFile(ba),wa=new M.Low(va),Ea={save:(ma=rr(d.mark((function e(t){var n,r,i,s=arguments;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},(n=s.length>1&&void 0!==s[1]?s[1]:{})&&n.filter&&b.map(n.filter,(function(e){r[e]=t[e]})),e.next=5,Ea.get(r);case 5:if(!e.sent){e.next=10;break}throw new Error("已经生成相同的服务器信息");case 10:return Ea.set(t),e.next=13,Ea.get();case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)}))),function(e){return ma.apply(this,arguments)}),delete:function(e){return wa.read().then((function(){if(b.isObject(e)){var t=b.chain(wa.data).get("keys").remove(e).value();return wa.write(),t}throw new Error("请删除正确的信息")}))},get:(ga=rr(d.mark((function e(t){var n;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa.read();case 2:if(n=b.chain(wa.data).get("keys"),!b.isObject(t)){e.next=5;break}return e.abrupt("return",n.find(t).value());case 5:return e.abrupt("return",n.value());case 6:case"end":return e.stop()}}),e)}))),function(e){return ga.apply(this,arguments)}),set:(pa=rr(d.mark((function e(t){var n;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wa.data||(wa.data={keys:[]}),null===(n=wa.data)||void 0===n||n.keys.push(t),e.next=4,wa.write();case 4:case"end":return e.stop()}}),e)}))),function(e){return pa.apply(this,arguments)})},Oa=c.resolve(c.dirname(""));function xa(e,t,n,r){return new Promise((function(i,s){D.exec("ssh-copy-id -i ".concat(e("sshKey.pub")," -p ").concat(t," ").concat(n,"@").concat(r),(function(e){e||i(!0),s(new Error("复制秘钥错误, 终止操作"))})).on("exit",(function(t){t&&function(e,t){return new Promise((function(n,r){Zo("".concat(t()),function(){var t=rr(d.mark((function t(i){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}throw i;case 2:return t.next=4,Ea.delete({user:e});case 4:t.sent?n(!0):r(new Error("删除失败"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}(n,e).then((function(e){e&&s(new Error("复制秘钥错误, 终止操作"))})).catch((function(){s(new Error("复制秘钥错误, 终止操作"))}))}))}))}var Sa=function(){var e=rr(d.mark((function e(t,n){var r,i;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return c.join(Oa,"/.key/".concat(t.file),"".concat(e||""))},e.next=3,da(c.join(Oa,"/.key/".concat(t.file)));case 3:if(i=e.sent){e.next=6;break}throw new Error("已创建该文件");case 6:return e.next=8,P.stat(i);case 8:if(e.sent.isDirectory()){e.next=11;break}throw new Error("没有该文件夹");case 11:return e.next=13,new Promise((function(e,n){C({location:c.join(i,"sshKey"),comment:t.comment||t.user,password:t.password,read:!0,format:t.format},(function(r,i){r?n(r):(t.keyType||(console.log("Keys created!"),console.log("private key: ".concat(i.key)),console.log("public key: ".concat(i.pubKey))),e(i))}))}));case 13:if(e.sent){e.next=16;break}throw new Error("创建秘钥失败");case 16:return n&&n(),e.abrupt("return",xa(r,t.port,t.user,t.address));case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _a,Ca=[{type:"input",name:"serverName",message:"设置服务器名称:",default:"服务器名称"},{type:"input",name:"address",message:"设置服务器:",default:"locahost"},{type:"input",name:"port",message:"设置端口号",default:22},{type:"input",name:"user",message:"用户名称:",default:"root"},{type:"input",name:"file",message:"设置ssh-keygen名称:",default:"sshkey"},{type:"input",name:"password",message:"设置ssh-keygen密码:（不设置即无秘登录）"},{type:"input",name:"comment",message:"请提供新的注释:"},{type:"input",name:"format",message:"请指定要创建的密钥类型:",default:"PEM"},{type:"confirm",name:"keyType",message:"是否隐藏秘钥信息反馈?"}],Aa=rr(d.mark((function e(){var t,n,r;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ve(),e.prev=1,e.next=4,Ls.prompt(Ca);case 4:return n=e.sent,e.next=7,Ls.prompt({type:"confirm",name:"type",message:"请确定你的信息!"});case 7:if(!e.sent.type){e.next=19;break}return t.start("生成ssh-keygen中..."),r=ja({time:Date.now()},n),e.next=13,Sa(r,(function(){t.info(" 正在将秘钥传入服务器，请输入服务器密码")}));case 13:if(!e.sent){e.next=19;break}return e.next=17,Ea.save(r,{filter:["address","serverName"]});case 17:e.sent&&t.succeed("创建秘钥成功");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),t.fail(e.t0&&e.t0.toString());case 24:case"end":return e.stop()}}),e,null,[[1,21]])}))),Pa=rr(d.mark((function e(){var t,n,r;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea.get();case 2:if(t=e.sent,b.isArray(t)){e.next=5;break}throw new Error("暂无保存的服务器列表");case 5:if(t&&t.length){e.next=7;break}throw new Error("暂无保存的服务器列表");case 7:return e.next=9,Ls.prompt([{type:"list",name:"time",message:"请选择服务器",choices:t.map((function(e){return{name:e.serverName,value:e.time}}))}]);case 9:return n=e.sent,r=b.find(t,(function(e){return e.time===n.time})),e.abrupt("return",{select:r,datas:t});case 12:case"end":return e.stop()}}),e)}))),Da=c.resolve(c.dirname("")),Ma=ve();Jn((_a=f.argv,_a.slice(We()+1))).command("set [server]","添加一台新的服务器配置",(function(e){return Ma.start("Loading..."),e.option("server",{alias:"S",describe:"请设置正确的服务器配置"})}),(function(e){Ma.stop(),e.server&&Aa().then((function(e){e&&Ma.succeed(oe.green("设置服务器信息成功!"))})).catch((function(){console.log("错误")}))})).command("list","服务器选择列表",(function(e){Pa().then((function(e){var t,n=e.select;n&&(t=n,new Promise((function(e,n){var r=D.exec("ssh -i ".concat(c.join(Da,".key/".concat(t.file),"sshKey")," ").concat(t.user,"@").concat(t.address," -p ").concat(t.port),(function(t){t||e(!0),n(new Error("登录错误，意外退出"))})).on("exit",(function(e){e&&n(new Error("登录错误，意外退出"))}));e(r)}))).then((function(){Ma.succeed("登录 ".concat(n.address," 成功"))}))})).catch((function(e){e&&Ma.warn(oe.yellow("暂时未获取到服务器信息"))}))})).command("del","删除服务器",(function(e){var t,n,r;(t=c.resolve(c.dirname("")),n="win32"===A.platform()?"powershell.exe":"bash",r=I.spawn(n,[],{name:"xterm-color",cols:80,rows:30,cwd:process.env.HOME,env:process.env}),Pa().then((function(e){var n=e.select;n&&(r.on("data",(function(e){process.stdout.write(e),/oh-my-zsh/.test(e)&&r.write("n\r")})),r.write("ssh -i ".concat(c.join(t,".key/".concat(n.file),"sshKey")," ").concat(n.user,"@").concat(n.address," -p ").concat(n.port,"\r")),r.write("cat ~/.ssh/authorized_keys\r"))}))).catch((function(e){e&&Ma.warn(oe.yellow("暂时未获取到服务器信息"))}))})).demandCommand(1).argv;
